(function(e){function t(t){for(var i,a,o=t[0],c=t[1],u=t[2],l=0,m=[];l<o.length;l++)a=o[l],r[a]&&m.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,a=1;a<s.length;a++){var c=s[a];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},r={app:0},n=[];function a(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"0bf3fb79"}[e]+".js"}function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise(function(t,i){s=r[e]=[t,i]});t.push(s[2]=i);var n,c=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=a(e),n=function(t){u.onerror=u.onload=null,clearTimeout(l);var s=r[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+n+")");a.type=i,a.request=n,s[1](a)}r[e]=void 0}};var l=setTimeout(function(){n({type:"timeout",target:u})},12e4);u.onerror=u.onload=n,c.appendChild(u)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"08b9":function(e,t,s){e.exports=s.p+"img/dibs_stamp.c5c496ad.svg"},"0928":function(e,t,s){},"0a72":function(e,t,s){"use strict";var i=s("cd03"),r=s.n(i);r.a},1:function(e,t){},"109d":function(e,t,s){},1794:function(e,t,s){},"182a":function(e,t,s){},"1ede":function(e,t,s){},2073:function(e,t,s){},"21bb":function(e,t,s){"use strict";var i=s("bcc9"),r=s.n(i);r.a},2667:function(e,t,s){"use strict";var i=s("ec60"),r=s.n(i);r.a},"2a0e":function(e,t,s){"use strict";var i=s("3a82"),r=s.n(i);r.a},3408:function(e,t,s){"use strict";var i=s("689d"),r=s.n(i);r.a},"365f":function(e,t,s){},"3a82":function(e,t,s){},4453:function(e,t,s){"use strict";var i=s("182a"),r=s.n(i);r.a},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840d","./gl.js":"8840d","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return s(t)}function n(e){var t=i[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id="4678"},"46e8":function(e,t,s){"use strict";var i=s("55af"),r=s.n(i);r.a},"496c":function(e,t,s){},"4a65":function(e,t,s){"use strict";var i=s("109d"),r=s.n(i);r.a},"51e2":function(e,t,s){"use strict";var i=s("e918"),r=s.n(i);r.a},"55af":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("garage-header"),s("router-view",{staticClass:"router-view"}),s("menu-screen"),s("garage-footer")],1)},n=[],a="loggedInUser";function o(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function c(e,t){localStorage[e]=JSON.stringify(t)}function u(e){localStorage.removeItem(e)}var l={load:o,save:c,clear:u},d="get-msg",m="dibs",f=new i["a"],g=f,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer",class:{open:e.isMenu}},[s("section",{staticClass:"footer-icons-wrapper"},[s("router-link",{staticClass:"footer-item footer-item-1",attrs:{to:"/"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-home"}),s("p",[e._v("Home")])])]),s("router-link",{staticClass:"footer-item footer-item-4",attrs:{to:e.user?"/chat":"/login"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-comment-alt"}),s("p",[e._v("Chat")]),e.user&&e.user.historyChat.length?s("span",{staticClass:"chat-notification"},[e._v(e._s(e.user.historyChat.length))]):e._e()])]),s("router-link",{staticClass:"footer-item footer-item-5",attrs:{to:"/select-image/item"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-plus"}),s("p",[e._v("Sell item")])])]),e.user?s("router-link",{staticClass:"footer-item footer-item-3",attrs:{userId:e.user._id,to:"/user/wishlist/"+e.user._id}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-heart"}),s("p",[e._v("Wishlist")])])]):s("router-link",{staticClass:"footer-item footer-item-3",attrs:{to:"/login"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-heart"}),s("p",[e._v("Wishlist")])])]),e.user?s("router-link",{staticClass:"footer-item footer-item-2 flex row",attrs:{to:"/user/"+e.user._id}},[s("i",{staticClass:"fas fa-user"},[e.user.dibsAns.filter(function(e){return e.isAns}).length||e.user.dibs.length?s("span",{staticClass:"footer-notification"},[e._v(e._s(e.user.dibsAns.filter(function(e){return e.isAns}).length+e.user.dibs.length))]):e._e()]),s("p",[e._v("My profile")])]):s("router-link",{staticClass:"footer-item footer-item-2",attrs:{to:"/login"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-user"}),s("p",[e._v("My profile")])])])],1)])},h=[],v={name:"garage-footer",methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},b=v,_=(s("78fe"),s("2877")),y=Object(_["a"])(b,p,h,!1,null,"df16a30a",null);y.options.__file="garage-footer.vue";var U=y.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"home-header flex row between center"},[s("div",{staticClass:"logo-container flex row center"},[s("div",{staticClass:"burger"},[e.isMenu?s("i",{staticClass:"fas fa-times",on:{click:e.toggleMenu}}):s("i",{staticClass:"fas fa-bars",on:{click:e.toggleMenu}})]),s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"logo-text"},[e._v("dibs")])])],1),s("router-link",{attrs:{to:"/search"}},[s("i",{staticClass:"fas fa-search"})]),s("div",{staticClass:"header-icons-container"},[e.user?s("div",{staticClass:"flex row center"},[s("section",{staticClass:"user-icon-text"},[s("div",[e._v("Hello "+e._s(e.user.nickname))]),s("a",{staticClass:"logoutBtn",on:{click:e.logoutUser}},[e._v("Logout")])]),s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/user/"+e.user._id}},[s("i",{staticClass:"fas fa-user"}),e.user.dibsAns.filter(function(e){return e.isAns}).length||e.user.dibs.length?s("span",{staticClass:"notification"},[e._v(e._s(e.user.dibsAns.filter(function(e){return e.isAns}).length+e.user.dibs.length))]):e._e()])],1):s("div",[s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/login"}},[e._v("\n        Login\n      ")]),e._v(" |\n      "),s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/signup"}},[e._v("Signup")])],1)])],1)},w=[],k={methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})},logoutUser:function(){var e=this;console.log("curr user is: ",this.user),this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},I=k,$=(s("add1"),Object(_["a"])(I,C,w,!1,null,"aac9442c",null));$.options.__file="garage-header.vue";var j=$.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"screen",class:{open:e.isMenu},on:{click:e.toggleMenu}})},L=[],M={methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},D=M,S=(s("4a65"),Object(_["a"])(D,x,L,!1,null,"b1da7bd0",null));S.options.__file="screen.vue";var O=S.exports,N={components:{garageFooter:U,garageHeader:j,menuScreen:O},methods:{},created:function(){var e=this,t=l.load(a);t&&this.$store.dispatch({type:"checkUser",user:t}).then(function(){e.$store.commit({type:"connectSocket",userId:e.$store.getters.getLoggedUser._id}),g.$on(m,function(){e.$store.dispatch({type:"loadDibs"})})})}},A=N,P=(s("5c0b"),Object(_["a"])(A,r,n,!1,null,null,null));P.options.__file="App.vue";var E=P.exports,T=s("8c4f"),R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[e.isLoading?s("div",[e._v("Loding...")]):s("div",{staticClass:"home"},[s("div",{staticClass:"info-section flex column"},[e._m(0),e.bestSellers?s("garage-carousel",{attrs:{bestSellers:e.bestSellers}}):e._e()],1),s("section",{staticClass:"home-content"},[s("item-list",{staticClass:"item-list",attrs:{items:e.items}})],1)])])},q=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"home-page-text"},[e._v("Search , Pick "),s("span",[e._v("&")]),e._v(" Call Dibs! ")])}],B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("ul",{staticClass:"home-list"},e._l(e.items,function(e){return s("item-preview",{key:e._id,attrs:{item:e}})}))])},J=[],z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.item&&!e.isUserItem?i("li",{staticClass:"item-preview-container"},[i("section",{staticClass:"main-list-item",on:{click:function(t){e.itemClicked(e.item._id)}}},[i("div",{staticClass:"seller-preview",on:{click:function(t){t.stopPropagation(),e.userClicked(e.seller._id)}}},[e.seller.img?i("img",{staticClass:"seller-thumbnail",attrs:{src:e.seller.img}}):e._e(),i("div",[i("h3",[e._v(e._s(e.seller.nickname))]),e.loggedUser?i("div",[e._v(e._s(e.distance)+" Km away")]):e._e()])]),i("div",{staticClass:"img-wrapper"},[i("section",[e.wishlist?i("i",{staticClass:"fas fa-heart full-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}}):i("i",{staticClass:"fas fa-heart empty-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}})]),e.isDibs?i("section",[i("img",{staticClass:"dibs-stamp",attrs:{src:s("08b9")}})]):e._e(),e.item.img?i("img",{staticClass:"main-list-img",attrs:{src:e.item.img}}):e._e()]),i("div",{staticClass:"main-item-details"},[i("div",{staticClass:"main-list-header"},[e._v(e._s(e.item.title))]),i("div",{staticClass:"item-desc-prev"},[e._v(e._s(e.item.desc))]),i("div",[e._v(e._s(e.item.price?e.item.price+"$":"FREE"))])])])]):e._e()},W=[],F={props:{item:Object},methods:{toggleWishlist:function(){var e=this.item._id;if(!this.loggedUser)return this.$router.push("/login");this.$store.dispatch({type:"toggleWishlist",id:e})},userClicked:function(e){this.$router.push("/user/".concat(e))},itemClicked:function(e){this.$router.push("/item/details/".concat(e))}},computed:{userWishlist:function(){if(this.loggedUser)return this.loggedUser.wishList},isUserItem:function(){var e=this;return!!this.loggedUser&&this.loggedUser.itemList.some(function(t){return t===e.item._id})},isDibs:function(){if(this.item.callDibs)return this.item.callDibs.length>0},seller:function(){return this.item.user},wishlist:function(){var e=this.item._id;if(this.loggedUser)return this.loggedUser.wishList.some(function(t){return t===e})},distance:function(){var e=this.item.location;return this.$store.getters.getDistance(e)},loggedUser:function(){return this.$store.getters.getLoggedUser}}},G=F,H=(s("2a0e"),Object(_["a"])(G,z,W,!1,null,"4a43a036",null));H.options.__file="item-preview.vue";var K=H.exports,V=s("ade3"),Y=s("bc3a"),Q=s.n(Y),X="/api/item",Z=Object(V["a"])({query:ee,getById:te,remove:se,edit:ie,saveImage:re,addItem:ne},"remove",se);function ee(){return Q.a.get("".concat(X)).then(function(e){return e.data})}function te(e){return Q.a.get("".concat(X,"/").concat(e)).then(function(e){return e.data})}function se(e,t){return Q.a.delete("".concat(X,"/").concat(e,"/").concat(t)).then(function(e){return e.data[0]})}function ie(e){return e._id?Q.a.put("".concat(X,"/edit"),e).then(function(e){return console.log("res.data:",e.data),e.data}):Q.a.post("".concat(X),e)}function re(e){return Q.a.post("".concat(X,"/add-image"),e).then(function(e){return e.data})}function ne(e){return Q.a.post("".concat(X,"/add-item"),e).then(function(e){return e.data})}var ae={props:{items:Array},components:{itemPreview:K,itemService:Z},created:function(){}},oe=ae,ce=(s("f168"),Object(_["a"])(oe,B,J,!1,null,"389c0450",null));ce.options.__file="item-list.vue";var ue=ce.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("carousel",{staticClass:"carousel",attrs:{loop:!0,"per-page":1,navigationEnabled:!1,"mouse-drag":!1}},e._l(e.bestSellers,function(e){return s("slide",{key:e._id},[s("garage-card",{attrs:{user:e}})],1)}))},de=[],me=s("0a63"),fe=s.n(me),ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"garage-card",on:{click:function(t){e.sellerClicked(e.user._id)}}},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.user.header}})]),s("div",{staticClass:"garage-card-content flex column"},[s("img",{staticClass:"garage-card-user-img",attrs:{src:e.user.img}}),s("div",{staticClass:"seller-info flex column"},[s("h3",[e._v(e._s(e.user.nickname)+"'s Garage")]),s("h3",[e._v("Specializes in "+e._s(e.user.desc))]),s("div",{staticClass:"rating"},[e._l(e.user.rate,function(e){return s("span",{key:e,staticClass:"fa fa-star checked"})}),e._l(5-e.user.rate,function(e){return s("span",{key:e.idx,staticClass:"fa fa-star empty-star"})})],2)]),s("div",[e._v("Selling: "+e._s(e.user.listedItems.length)+" items")])])])},pe=[],he={props:["user"],methods:{sellerClicked:function(e){this.$router.push("/user/".concat(e))}}},ve=he,be=(s("d822"),Object(_["a"])(ve,ge,pe,!1,null,null,null));be.options.__file="garage-card.vue";var _e=be.exports,ye={props:["bestSellers"],components:{Carousel:me["Carousel"],Slide:me["Slide"],garageCard:_e}},Ue=ye,Ce=(s("2667"),Object(_["a"])(Ue,le,de,!1,null,null,null));Ce.options.__file="garage-carousel.vue";var we=Ce.exports,ke={name:"home",components:{itemList:ue,garageCarousel:we,menuScreen:O},data:function(){return{isLoading:!0}},created:function(){var e=this;this.$store.dispatch({type:"loadItems"}).then(function(t){e.isLoading=!1}),this.$store.dispatch({type:"getBestSellers"}).then(function(t){e.best=!1})},computed:{items:function(){return this.$store.getters.itemsToDisplay},user:function(){return this.$store.getters.getLoggedUser},bestSellers:function(){return this.$store.getters.bestSellers},countOfDibsAns:function(){return this.user.dibsAns.filter(function(e){return e.isAns}).length}}},Ie=ke,$e=(s("21bb"),Object(_["a"])(Ie,R,q,!1,null,null,null));$e.options.__file="Home.vue";var je=$e.exports,xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"chat-page-container"},[s("chat-list",{attrs:{data:e.userMsgs}})],1)},Le=[],Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",e._l(e.data,function(e,t){return s("chat-preview",{key:t,attrs:{item:e}})}))},De=[],Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{attrs:{to:e.item.link}},[s("li",[s("span",{staticClass:"available",class:{offline:!e.item.isAvailable,inline:e.item.isAvailable}}),e.item.img?s("img",{attrs:{src:e.item.img}}):e._e(),s("div",[s("div",{staticClass:"chat-head"},[e._v(e._s(e.item.title))]),s("p",[e._v(e._s(e.item.txt))])])])])},Oe=[],Ne={props:["item"]},Ae=Ne,Pe=(s("ed73"),Object(_["a"])(Ae,Se,Oe,!1,null,"5044af62",null));Pe.options.__file="chat-preview.vue";var Ee=Pe.exports,Te={props:{data:Array},components:{chatPreview:Ee}},Re=Te,qe=(s("51e2"),Object(_["a"])(Re,Me,De,!1,null,null,null));qe.options.__file="chat-list.vue";var Be=qe.exports,Je={data:function(){return{loggedUser:null,userMsgs:[]}},computed:{rooms:function(){return this.$store.getters.getRooms}},methods:{getUserMsgs:function(){var e=this;console.log(this.rooms);var t=this;return this.rooms.map(function(s){if(s.userId===e.loggedUser._id)var i=s.userDest;else i=s.userId;e.$store.dispatch({type:"getUserById",userId:i}).then(function(e){t.userMsgs.push({txt:s.historyMsgs[s.historyMsgs.length-1].txt,title:e.nickname,img:e.img,link:"/chat/user/".concat(i),isAvailable:e.isAvailable})})})}},created:function(){var e=this,t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));t.historyChat=[],this.$store.dispatch({type:"updateUser",user:t}).then(function(){e.loggedUser=e.$store.getters.getLoggedUser,e.$store.dispatch({type:"loadRooms",userId:e.loggedUser._id}).then(function(){e.getUserMsgs()})})},components:{chatList:Be}},ze=Je,We=(s("3408"),Object(_["a"])(ze,xe,Le,!1,null,null,null));We.options.__file="chat-page.vue";var Fe=We.exports,Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",{staticClass:"login-page page-layout flex column"},[s("form",{staticClass:"flex column",on:{submit:function(t){return t.preventDefault(),e.checkUser(t)}}},[s("label",{staticClass:"input-line"},[s("div",[e._v("Username:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.nickname,expression:"user.nickname"}],attrs:{autofocus:"",type:"text",required:""},domProps:{value:e.user.nickname},on:{input:function(t){t.target.composing||e.$set(e.user,"nickname",t.target.value)}}})]),s("label",{staticClass:"input-line"},[s("div",[e._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("button",{staticClass:"login-btn"},[e._v("Login")]),e.isUnknowen?s("span",[e._v("Unvalid Username/Password")]):e._e()]),s("p",[e._v("New Here?")]),s("router-link",{attrs:{to:"/signup"}},[s("button",{staticClass:"sign-btn"},[e._v("Sign up!")])]),s("p",[e._v("or")]),s("router-link",{attrs:{to:"/"}},[s("button",{staticClass:"sign-btn"},[e._v("Continue as a guest")])])],1)])},He=[],Ke={name:"login",components:{garageFooter:U},data:function(){return{user:{nickname:null,password:null},isUnknowen:!1}},methods:{checkUser:function(){var e=this,t=JSON.parse(JSON.stringify(this.user));this.$store.dispatch({type:"checkUser",user:t}).then(function(){e.$router.push("/")}).catch(function(){e.isUnknowen=!0,setTimeout(function(){return e.isUnknowen=!1},2e3)})}}},Ve=Ke,Ye=(s("647d"),Object(_["a"])(Ve,Ge,He,!1,null,"1c089a56",null));Ye.options.__file="login-page.vue";var Qe=Ye.exports,Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"chat-container"},[s("div",{staticClass:"chat-msgs"},e._l(e.msgs,function(t,i){return s("div",{key:i,staticClass:"message",class:{"loggedin-side":t.from._id===e.loggedUser._id,"userChat-side":t.from._id!==e.loggedUser._id}},[s("img",{attrs:{src:t.from.img,alt:"",srcset:""}}),e._v("\n      \n      "+e._s(t.txt)+"\n      "),s("p",{staticClass:"msg-time"},[e._v(e._s(e._f("relativeTime")(t.createAt)))])])})),s("div",{staticClass:"chat-text"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newMsg.txt,expression:"newMsg.txt"}],attrs:{type:"text",required:""},domProps:{value:e.newMsg.txt},on:{input:function(t){t.target.composing||e.$set(e.newMsg,"txt",t.target.value)}}}),e._m(0)])])])},Ze=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"send"},[s("i",{staticClass:"far fa-paper-plane"})])}],et={data:function(){return{newMsg:{from:"",txt:"",createAt:""},loggedUser:null}},computed:{msgs:function(){return this.$store.getters.getMsgs}},methods:{sendMsg:function(){var e=this;console.log("send msg",this.newMsg),this.newMsg.from={_id:this.loggedUser._id,nickname:this.loggedUser.nickname,img:this.loggedUser.img},this.newMsg.createAt=Date.now();var t=JSON.parse(JSON.stringify(this.newMsg));this.$store.dispatch({type:"sendMsg",msg:t,user:this.loggedUser}).then(function(){return e.newMsg={from:"",txt:""}})}},created:function(){this.loggedUser=this.$store.getters.getLoggedUser;var e=this.$route.params.sellerId;this.$store.commit({type:"connectSocket",userId:this.loggedUser._id,userDest:e}),this.$store.dispatch({type:"loadMsgs",userId:this.loggedUser._id,userDest:e})},components:{}},tt=et,st=(s("c70e"),Object(_["a"])(tt,Xe,Ze,!1,null,"6fb78f86",null));st.options.__file="user-chat.vue";var it=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("section",{staticClass:"wishlist-container"},[s("h1",{staticClass:"home-page-text"},[e._v("My Wishlist")]),e.isLoadin?s("section",{staticClass:"loading"},[e._v("Loading...")]):s("items-thumbnail",{attrs:{list:e.wishlist}})],1)])},nt=[],at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"items-thumbnail"},e._l(e.list,function(t,i){return s("li",{key:i,on:{click:function(s){e.itemClicked(t._id)}}},[s("div",{staticClass:"img-container"},[s("img",{staticClass:"img-thumb",attrs:{src:t.img}})])])}))},ot=[],ct={props:["list"],methods:{itemClicked:function(e){this.$router.push("/item/details/".concat(e))}}},ut=ct,lt=(s("9e0b"),Object(_["a"])(ut,at,ot,!1,null,"155cc23f",null));lt.options.__file="item-thumbnail.vue";var dt=lt.exports,mt={name:"home",components:{itemsThumbnail:dt},data:function(){return{isLoadin:!0,wishlist:[]}},methods:{itemClicked:function(e){this.$router.push("/item/details/".concat(e))},getUserWishlist:function(){var e=this.$store.getters.getLoggedUser._id,t=this;this.$store.dispatch({type:"getUserWishlist",userId:e}).then(function(e){t.wishlist=e.wishlistItems,console.log(e),t.isLoadin=!1}).catch(function(e){return console.log("ERROOOR")})}},watch:{"$route.params.userId":{handler:function(){this.getUserWishlist()},immediate:!0}}},ft=mt,gt=(s("6b32"),Object(_["a"])(ft,rt,nt,!1,null,"3e49bdd0",null));gt.options.__file="wish-page.vue";var pt=gt.exports,ht=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-container flex column"},[e.isLoaded?[i("header",{staticClass:"details-header flex row"},[i("div",{staticClass:"header-content"},[i("h3",[e._v(e._s(e.currItem.title))]),i("span",{attrs:{id:"item-created"}},[e._v("Listed : "+e._s(e._f("relativeTime")(e.currItem.createAt)))]),e.isLoggedUser?i("div",{staticClass:"edit-btn-container"},[i("router-link",{attrs:{to:"/item/edit/"+e.currItem._id}},[i("i",{staticClass:"far fa-edit edit-item"})]),i("i",{staticClass:"far fa-trash-alt",on:{click:e.removeItem}})],1):e._e()]),i("router-link",{attrs:{to:"/user/"+e.currSeller._id}},[i("img",{staticClass:"details-seller-img",attrs:{src:e.currSeller.img,alt:"placeholder image"}})])],1),i("section",{staticClass:"item-content flex column"},[i("div",{staticClass:"img-details-container",style:{backgroundImage:"url("+e.currItem.img+")"}},[e.currItem.callDibs.length>0?i("img",{staticClass:"dibs-stamp",attrs:{src:s("08b9"),alt:"",srcset:""}}):e._e()]),i("div",{staticClass:"details-container"},[i("div",[i("div",[i("p",{staticClass:"item-desc"},[e._v(e._s(e.currItem.desc))]),i("p",[i("i",{staticClass:"fas fa-map-marker-alt"}),e._v("\n              "+e._s(e.distance)+" Km away\n            ")]),i("p",[e._v("Condition: "+e._s(e.currItem.condition))]),i("p",[e._v("Price: "+e._s(e.currItem.price?e.currItem.price+"$":"FREE"))])]),i("div",{staticClass:"action-btn-container flex row"},[!e.loggedUser||e.isLoggedUser||e.currItem.callDibs.includes(e.loggedUser._id)?e._e():i("button",{staticClass:"dibs-btn",on:{click:e.sendDibs}},[e._v("Call dibs!")]),e.loggedUser?e._e():i("button",{staticClass:"dibs-btn",on:{click:function(t){e.$router.push("/login")}}},[e._v("Call dibs!")]),e.loggedUser&&!e.isLoggedUser?i("section",{staticClass:"heart"},[e.wishlist?i("i",{staticClass:"fas fa-heart full-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}}):i("i",{staticClass:"fas fa-heart empty-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}})]):e._e(),e.loggedUser&&!e.isLoggedUser?i("router-link",{attrs:{to:"/chat/user/"+e.currSeller._id}},[i("i",{staticClass:"far fa-comment-alt"})]):e._e()],1)]),i("google-map",{attrs:{itemCoords:e.currItem.location}})],1)])]:i("div",[e._v("Loading...")])],2)},vt=[],bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.center,zoom:13}},[s("gmap-marker",{attrs:{position:e.marker.position,clickable:!0},on:{click:e.toggleInfoWin}},[e.isLoaded?s("info-window",{attrs:{opened:e.marker.isInfoOpen}},[e._v(e._s(e.address))]):e._e()],1)],1)],1)},_t=[],yt=s("54f9"),Ut={name:"GoogleMap",components:{InfoWindow:yt["default"]},props:["itemCoords"],data:function(){return{center:{lat:32.088032,lng:34.803139},marker:{position:{lat:this.itemCoords.lat,lng:this.itemCoords.lng},isInfoOpen:!1},address:"No valid address",isLoaded:!1}},mounted:function(){this.geolocate(),this.checkIfLoaded()},created:function(){},methods:{checkIfLoaded:function(){var e=this;this.$refs.mapRef.$mapPromise.then(function(){return e.isLoaded=!0,e.reverseGeolocate()}).then(function(t){return e.address=t})},reverseGeolocate:function(){var e=new google.maps.Geocoder,t={};return t.lat=this.marker.position.lat,t.lng=this.marker.position.lng,new Promise(function(s,i){e.geocode({location:t},function(e,t){"OK"==t&&s(e[0].formatted_address)})})},toggleInfoWin:function(){this.marker.isInfoOpen=!this.marker.isInfoOpen},geolocate:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){e.center={lat:t.coords.latitude,lng:t.coords.longitude}})}}},Ct=Ut,wt=Object(_["a"])(Ct,bt,_t,!1,null,null,null);wt.options.__file="GoogleMap.vue";var kt=wt.exports,It={name:"item-details",components:{GoogleMap:kt},data:function(){return{currItem:{},currSeller:{},isLoaded:!1,distance:0}},created:function(){var e=this,t=this.$route.params.id;this.$store.dispatch({type:"getItemById",itemId:t}).then(function(t){e.currItem=t;var s=e.currItem.sellerId;e.$store.dispatch({type:"getUserById",userId:s}).then(function(t){e.currSeller=t,e.isLoaded=!0;var s=e.currItem.location;e.distance=e.$store.getters.getDistance(s)})})},methods:{toggleWishlist:function(){var e=this.currItem._id;if(!this.loggedUser)return this.$router.push("/login");this.$store.dispatch({type:"toggleWishlist",id:e})},sendDibs:function(){var e=this;if(this.loggedUser){var t=JSON.parse(JSON.stringify(this.currItem));t.callDibs.push(this.loggedUser._id),this.currItem.callDibs.push(this.loggedUser._id),this.$store.dispatch({type:"editItem",item:t}).then(function(t){delete t.user,e.$store.dispatch({type:"sendDibs",userId:e.loggedUser._id,item:t});var s=JSON.parse(JSON.stringify(e.loggedUser));s.dibsAns.unshift({isAns:!1,item:t}),e.$store.dispatch({type:"updateUser",user:s})})}else this.$router.push("/login")},removeItem:function(){var e=this,t=this.currItem;this.$store.dispatch({type:"removeItem",item:t}).then(function(){e.$router.push("/")})},chatClicked:function(){this.$router.push("/chat")}},computed:{wishlist:function(){var e=this.currItem._id;if(this.loggedUser)return this.loggedUser.wishList.some(function(t){return t===e})},relativeTime:function(e){moment(e).fromNow()},imgSrc:function(){this.currSeller.img},isLoggedUser:function(){if(this.loggedUser){var e=this.$store.getters.getLoggedUser._id;return e===this.currSeller._id}return!1},loggedUser:function(){return this.$store.getters.getLoggedUser}}},$t=It,jt=(s("0a72"),Object(_["a"])($t,ht,vt,!1,null,"f84fe5ea",null));jt.options.__file="item-details.vue";var xt=jt.exports,Lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"edit-item-container"},[s("form",{staticClass:"edit-form",on:{submit:function(t){return t.preventDefault(),e.saveItem(t)}}},[s("div",[s("img",{attrs:{src:e.currItem.img}})]),s("div",[s("label",[s("span",[e._v("Title:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.currItem.title,expression:"currItem.title"}],attrs:{type:"text",required:""},domProps:{value:e.currItem.title},on:{input:function(t){t.target.composing||e.$set(e.currItem,"title",t.target.value)}}})]),s("label",[s("span",[e._v("Category:")]),e.catagories.length>0?s("select",{directives:[{name:"model",rawName:"v-model",value:e.currItem.category,expression:"currItem.category"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.currItem,"category",t.target.multiple?s:s[0])}}},e._l(e.catagories,function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})):e._e()]),s("label",[s("span",[e._v("Condition:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.currItem.condition,expression:"currItem.condition"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.currItem,"condition",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"likeNew"}},[e._v("Like new")]),s("option",{attrs:{value:"used"}},[e._v("Used")])])]),s("label",[s("span",[e._v("Description:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currItem.desc,expression:"currItem.desc"}],attrs:{cols:"30",rows:"10",required:""},domProps:{value:e.currItem.desc},on:{input:function(t){t.target.composing||e.$set(e.currItem,"desc",t.target.value)}}})]),s("label",[s("span",[e._v("Price:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.currItem.price,expression:"currItem.price"}],attrs:{type:"number",required:""},domProps:{value:e.currItem.price},on:{input:function(t){t.target.composing||e.$set(e.currItem,"price",t.target.value)}}})]),s("button",{attrs:{type:"submit"}},[e._v("Save")])])]),s("garage-footer")],1)},Mt=[],Dt=(s("96cf"),s("1da1")),St={data:function(){return{currItem:{title:"",category:"",desc:"",price:0,img:"",condition:"",callDibs:[]},isLoadingCat:!1,catagories:[]}},methods:{saveItem:function(){var e=Object(Dt["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=JSON.parse(JSON.stringify(this.currItem)),!this.currItem._id){e.next=5;break}this.$store.dispatch({type:"editItem",item:t}).then(function(e){console.log("ret from server",e),s.$router.push("/item/details/".concat(e._id))}),e.next=12;break;case 5:return t=JSON.parse(JSON.stringify(this.currItem)),t.createAt=Date.now(),t.sellerId=this.$store.getters.getLoggedUser._id,e.next=10,this.$store.dispatch({type:"getLocation"});case 10:t.location=e.sent,this.$store.dispatch({type:"addItem",item:t}).then(function(e){s.$store.commit({type:"resetNewUrl"}),s.$router.push("/item/details/".concat(e))});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{},created:function(){var e=this,t=this.$route.params.id;if(t)this.$store.dispatch({type:"getItemById",itemId:t}).then(function(t){return e.currItem=t});else{var s={title:"",category:"",Description:"",price:0,img:this.$store.getters.getImageUrl};this.currItem=s}this.isLoadingCat=!0,this.$store.dispatch({type:"getAllCatagories"}).then(function(t){e.catagories=t,e.isLoadingCat=!1})},components:{garageHeader:j,garageFooter:U}},Ot=St,Nt=(s("bda8"),Object(_["a"])(Ot,Lt,Mt,!1,null,"678df030",null));Nt.options.__file="edit-item.vue";var At=Nt.exports,Pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-layout"},[s("garage-header",[s("div",{attrs:{slot:"headline flex row"},slot:"headline flex row"},[s("h3",[e._v("Search")]),s("div",{staticClass:"filter-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.byTxt,expression:"filter.byTxt"}],attrs:{type:"text"},domProps:{value:e.filter.byTxt},on:{input:function(t){t.target.composing||e.$set(e.filter,"byTxt",t.target.value)}}})]),s("i",{staticClass:"fas fa-search"})])]),e.isLoadingCat?s("section",{staticClass:"loading"},[e._v("Loading")]):s("section",[s("div",{staticClass:"catagories-container"},e._l(e.catagories,function(t){return t.length>1?s("div",{key:t,on:{click:function(s){e.catagoryClicked(t)}}},[e._v(e._s(t)+" ")]):e._e()})),e.isLoadingItems?s("div",{staticClass:"loading"}):s("items-tumbnail",{staticClass:"search-res",attrs:{list:e.itemsToDisplay}}),s("div",{staticClass:"items-container"})],1),s("garage-footer")],1)},Et=[],Tt={name:"search-page",data:function(){return{catagories:[],itemsToDisplay:[],filter:{byTxt:"",byType:""},isLoadingCat:!1,isLoadingItems:!1}},created:function(){var e=this;this.isLoadingCat=!0,this.$store.dispatch({type:"getAllCatagories"}).then(function(t){e.catagories=t,e.isLoadingCat=!1})},methods:{catagoryClicked:function(e){this.filter.byType=e},filterItems:function(){var e=this;this.isLoadingItems=!0;var t=this.filter;this.$store.dispatch({type:"filterItems",filter:t}).then(function(t){e.itemsToDisplay=t,e.isLoadingItems=!1})}},watch:{filter:{handler:function(){this.filterItems()},immediate:!0,deep:!0}},components:{garageHeader:j,garageFooter:U,itemsTumbnail:dt}},Rt=Tt,qt=(s("70bc"),Object(_["a"])(Rt,Pt,Et,!1,null,"4865252a",null));qt.options.__file="search-page.vue";var Bt=qt.exports,Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"user-page-container"},[e.isLoadin?s("section",[e._v("Loading...")]):s("section",{staticClass:"user-page-content"},[s("div",{staticClass:"user-profile-preview"},[s("img",{staticClass:"user-profile-thumbnail",attrs:{src:e.user.img}}),s("div",{staticClass:"profile-info flex column"},[s("h1",[e._v(e._s(e.user.nickname)+e._s(e.isLoggedUser?"":"'s Garage"))]),e.isLoggedUser?s("section",[s("div",{staticClass:"edit-user flex row"},[s("i",{staticClass:"far fa-edit",on:{click:e.editUserClicked}}),s("h3",[e._v("Edit Profile")])]),s("a",{staticClass:"logoutBtn",on:{click:e.logoutUser}},[e._v("Logout")])]):s("div",{staticClass:"rating"},[e._l(e.user.rate,function(e){return s("span",{key:e,staticClass:"fa fa-star checked"})}),e._l(5-e.user.rate,function(e){return s("span",{key:e.idx,staticClass:"fa fa-star empty-star"})})],2)])]),e.isLoggedUser?s("div",{staticClass:"tab-container"},[s("sui-tab",{attrs:{"active-index":"0"}},[s("sui-tab-pane",{attrs:{label:e.user.listedItems.length+"",title:"My Garage"}},[s("items-tumbnail",{attrs:{list:e.user.listedItems}})],1),s("sui-tab-pane",{attrs:{label:e.dibs.length+"",title:"Dibs Requset"}},[s("dibs-page",{attrs:{isDibs:!1},on:{removeItem:e.removeItem}})],1),s("sui-tab-pane",{attrs:{label:e.dibsAns.filter(function(e){return e.isAns}).length+"",title:"Dibs Answer"}},[s("dibs-page",{attrs:{isDibs:!0},on:{removeItem:e.removeItem}})],1)],1)],1):[s("items-tumbnail",{attrs:{list:e.user.listedItems}})],e.user.events.length>2?s("event-feed",{attrs:{events:e.user.events}}):e._e()],2)])},zt=[],Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("sui-tab",{attrs:{"active-index":"2"}},[s("sui-tab-pane",{attrs:{icon:"users",title:"Circle"}},[e._v("Circle")]),s("sui-tab-pane",{attrs:{label:"0",title:"Box"}},[e._v("Box")]),s("sui-tab-pane",{attrs:{icon:"check",label:"14",title:"Triangle"}},[e._v("Triangle")])],1)],1)},Ft=[],Gt={name:"DefaultActiveIndexExample"},Ht=Gt,Kt=Object(_["a"])(Ht,Wt,Ft,!1,null,null,null);Kt.options.__file="user-tab.vue";var Vt=Kt.exports,Yt="/api/user",Qt={getById:is,getByName:rs,remove:os,edit:cs,checkUser:es,loadFromLocalStorage:ts,loadDibs:ss,getUserWishlist:as,updateUser:Zt,logout:Xt,getUsers:ns};function Xt(){return Q.a.post("".concat(Yt,"/logout"))}function Zt(e){l.save(a,e)}function es(e){return console.log("user in front service",e),Q.a.post("".concat(Yt),{user:e}).then(function(e){return console.log("res.data in  user service",e.data),l.save(a,e.data.token),e.data.user})}function ts(){var e=l.load(a);return e||null}function ss(e){return Q.a.get("".concat(Yt,"/dibs/").concat(e)).then(function(e){return e.data})}function is(e){return Q.a.get("".concat(Yt,"/").concat(e)).then(function(e){return e.data[0]})}function rs(e){return Q.a.post("".concat(Yt,"/sign/user"),{userName:e}).then(function(e){return e.data})}function ns(){return Q.a.get("".concat(Yt)).then(function(e){return e.data})}function as(e){return Q.a.get("".concat(Yt,"/wishlist/").concat(e)).then(function(e){return e.data[0]})}function os(e){return Q.a.delete("".concat(Yt,"/").concat(e))}function cs(e){return e._id?(l.save(a,e),Q.a.put("".concat(Yt),e).then(function(e){return e.data})):(console.log("user to update",e),Q.a.post("".concat(Yt,"/sign"),e))}var us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",[e._v("Upcoming events: "+e._s(e.news))])},ls=[],ds={props:["events"],data:function(){return{feed:null,news:null}},created:function(){var e=this,t=0;this.feed=setInterval(function(){console.log(e.events),e.news=e.events[t],t++,t>=e.events.length&&(t=0)},3e3)},destroyed:function(){clearInterval(this.feed)}},ms=ds,fs=(s("d8de"),Object(_["a"])(ms,us,ls,!1,null,"96ccaa78",null));fs.options.__file="event-feed.vue";var gs=fs.exports,ps=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loggedUser?s("section",{staticClass:"dibs-container"},[s("dibs-list",{attrs:{dibs:e.isDibs?e.dibsAns:e.dibs,isDibs:e.isDibs},on:{sendAns:e.sendAns,removeDib:e.removeDib,cancelDibReq:e.cancelDibReq,doneBuy:e.doneBuy}}),s("garage-footer")],1):e._e()},hs=[],vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[e.dibs.length?e._l(e.dibs,function(t,i){return s("dibs-preview",{key:i,attrs:{dib:t,idx:i,isAnsList:e.isDibs},on:{removeDib:function(t){e.$emit("removeDib",t)},sendAns:function(t){e.$emit("sendAns",t)},cancelDibReq:function(t){e.$emit("cancelDibReq",t)},doneBuy:function(t){e.$emit("doneBuy",t)}}})}):s("h1",[e._v("No dibs")])],2)},bs=[],_s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"dibs-li"},[e.isAnsList?[s("div",{staticClass:"dibAns-container"},[s("sui-card",[s("sui-card-content",[s("router-link",{attrs:{to:"/item/details/"+e.dib.item._id}},[s("sui-image",{staticClass:"right floated",attrs:{src:e.dib.item.img}})],1),s("sui-card-header",[e.dib.isAns?[e.dib.type?[e._v("\n                The seller accepted your dibs call! "),s("br"),e._v("\n                Talk to them:\n                "),s("router-link",{attrs:{to:"/chat/user/"+e.dib.item.sellerId}},[e._v("💬")])]:[e._v("\n                Sorry, the seller rejected your offer,"),s("br"),e._v("\n                Send a message:\n                "),s("router-link",{attrs:{to:"/chat/user/"+e.dib.item.sellerId}},[e._v("💬")])]]:[e._v("The seller hasn't answered yet!")]],2)],1),s("sui-card-content",{attrs:{extra:""}},[s("sui-container",{attrs:{"text-align":"center"}},[s("sui-button-group",[e.dib.isAns?s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("doneBuy",e.idx)}}},[e._v("Done!")]):s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("cancelDibReq",{dib:e.dib,idx:e.idx})}}},[e._v("Never mind..")])],1)],1)],1)],1)],1)]:[s("div",{staticClass:"dib-container"},[e.fromUser?s("sui-card",[s("sui-card-content",[s("router-link",{attrs:{to:"/user/"+e.fromUser._id}},[s("sui-image",{staticClass:"right floated",attrs:{src:e.fromUser.img}}),s("sui-card-header",[e._v(e._s(e.fromUser.nickname))])],1),s("sui-card-description",[e._v("\n            Interested about the "+e._s(e.dib.item.title)+" that you offer:\n            "),s("img",{attrs:{src:e.dib.item.img}})])],1),s("sui-card-content",{attrs:{extra:""}},[s("sui-container",{attrs:{"text-align":"center"}},[s("sui-button-group",[s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("sendAns",{dib:e.dib,idx:e.idx,type:!0})}}},[s("i",{staticClass:"far fa-thumbs-up ans-icon"})]),s("sui-button",{attrs:{basic:"",negative:""},on:{click:function(t){e.$emit("sendAns",{dib:e.dib,idx:e.idx,type:!1})}}},[s("i",{staticClass:"far fa-thumbs-down ans-icon"})])],1)],1)],1)],1):e._e()],1)]],2)},ys=[],Us={props:["dib","idx","isAnsList"],data:function(){return{fromUser:null}},methods:{getFromUser:function(){var e=this;this.$store.dispatch({type:"getUserById",userId:this.dib.from}).then(function(t){return e.fromUser=t})}},created:function(){this.isAnsList||this.getFromUser()}},Cs=Us,ws=Object(_["a"])(Cs,_s,ys,!1,null,null,null);ws.options.__file="dibs-preview.vue";var ks=ws.exports,Is={props:{dibs:Array,isDibs:Boolean},components:{dibsPreview:ks}},$s=Is,js=(s("f9c5"),Object(_["a"])($s,vs,bs,!1,null,null,null));js.options.__file="dibs-list.vue";var xs=js.exports,Ls={props:["isDibs"],computed:{dibs:function(){return this.$store.getters.getLoggedUser.dibs},dibsAns:function(){return this.$store.getters.getLoggedUser.dibsAns},loggedUser:function(){return this.$store.getters.getLoggedUser}},methods:{removeDib:function(e){var t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));return t.dibs.splice(e,1),console.log("after remove from dibs",t),this.$store.dispatch({type:"updateUser",user:t})},sendAns:function(e){var t=this,s=e.dib,i=e.idx,r=e.type,n={dib:s,idx:i,type:r};if(r)this.$store.dispatch({type:"removeItem",item:s.item}).then(function(){t.$emit("removeItem")}),this.removeDib(i).then(function(){t.$store.dispatch({type:"sendAns",ans:n})});else{var a=JSON.parse(JSON.stringify(s.item)),o=a.callDibs.indexOf(s.from);a.callDibs.splice(o,1),this.$store.dispatch({type:"editItem",item:a}),this.removeDib(i).then(function(){t.$store.dispatch({type:"sendAns",ans:n})})}},cancelDibReq:function(e){var t=e.dib,s=e.idx;if(confirm("Are you sure?")){var i=JSON.parse(JSON.stringify(t.item)),r=i.callDibs.indexOf(this.loggedUser._id);i.callDibs.splice(r,1),this.$store.dispatch({type:"editItem",item:i}),t.from=this.$store.getters.getLoggedUser._id;var n=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));n.dibsAns.splice(s,1),this.$store.dispatch({type:"updateUser",user:n}),this.$store.dispatch({type:"cancelDibReq",dib:t})}},doneBuy:function(e){alert("Review!");var t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));console.log(t),t.dibsAns.splice(e,1),console.log(t),this.$store.dispatch({type:"updateUser",user:t})}},components:{garageHeader:j,garageFooter:U,dibsList:xs}},Ms=Ls,Ds=(s("829e"),Object(_["a"])(Ms,ps,hs,!1,null,"a898e690",null));Ds.options.__file="dibs-page.vue";var Ss=Ds.exports,Os={name:"home",components:{garageFooter:U,itemsTumbnail:dt,eventFeed:gs,userService:Qt,userTab:Vt,dibsPage:Ss},data:function(){return{user:null,isLoadin:!0,isLoggedUser:!1}},methods:{logoutUser:function(){var e=this;console.log("curr user is: ",this.user),this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})},editUserClicked:function(){this.$router.push("/user/edit/".concat(this.user._id))},itemClicked:function(e){this.$router.push("/item/details/".concat(e))},removeItem:function(){this.setUser()},setUser:function(){var e=this,t=this.$route.params.userId,s=this.$store.getters.getLoggedUser;if(s){var i=this.$store.getters.getLoggedUser._id;t===i&&(this.isLoggedUser=!0)}this.$store.dispatch({type:"getUserById",userId:t}).then(function(t){e.user=t,console.log(t),e.isLoadin=!1}).catch(function(e){return console.log("EROOOOOR")})}},computed:{dibs:function(){return this.$store.getters.getLoggedUser.dibs},dibsAns:function(){return this.$store.getters.getLoggedUser.dibsAns}},watch:{"$route.params.userId":{handler:function(){this.isLoggedUser=!1,this.setUser()},immediate:!0}},created:function(){this.setUser(),console.log(this.user)}},Ns=Os,As=(s("a4e3"),Object(_["a"])(Ns,Jt,zt,!1,null,"03deab37",null));As.options.__file="user-page.vue";var Ps=As.exports,Es=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-item-container flex column"},[s("div",{staticClass:"video-container"},[e.showStream?s("video",{ref:"video",attrs:{id:"video",width:"300",height:"300",autoplay:"",muted:"muted"},domProps:{muted:!0}}):e._e()]),s("div",{staticClass:"icon",on:{click:e.capture}},[s("i",{staticClass:"fas fa-camera"})]),s("div",{staticClass:"file-upload-form"},[e._v("Or\n    "),s("br"),s("br"),s("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}})]),e.showStream?s("canvas",{ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}}):s("div",{staticClass:"image-preview"},[s("img",{staticClass:"preview",attrs:{src:e.imageData}})])])},Ts=[],Rs=(s("ac6a"),{name:"select-image",data:function(){return{video:{},canvas:{},captures:[],stream:null,showStream:!0,imageData:""}},mounted:function(){var e=this,t=this.$store.getters.getLoggedUser;t?(this.video=this.$refs.video,this.stream&&this.stream.stop&&this.stream.stop(),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.stream=t,e.video.src=window.URL.createObjectURL(t),e.video.play().catch(function(e){return console.log(e)})})):this.$router.push("/login")},methods:{stopStream:function(){var e=this.stream.getTracks();e.forEach(function(e){return e.stop()}),this.showStream=!1},capture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0,640,480);this.captures.push(canvas.toDataURL("image/png")),this.stopStream(),this.saveImage()},saveImage:function(){var e=this;if(this.captures[0])var t=this.captures[0];else t=this.imageData;this.$store.dispatch({type:"saveImage",imageToSave:t}).then(function(t){"edit-user"===e.$route.params.def?e.$router.push("/user/edit/userId"):"item"===e.$route.params.def?e.$router.push("/item/edit"):(e.$router.push("/signup"),console.log("PARAMS",e.$route.params.def))}).catch(function(e){console.log("ERROR:",e)})},previewImage:function(e){var t=this;this.stopStream();var s=e.target;if(s.files&&s.files[0]){var i=new FileReader;i.onload=function(e){t.imageData=e.target.result,t.saveImage()},i.readAsDataURL(s.files[0])}}},beforeDestroy:function(){var e=this.stream.getTracks();e&&this.stopStream()}}),qs=Rs,Bs=(s("46e8"),Object(_["a"])(qs,Es,Ts,!1,null,"31e02440",null));Bs.options.__file="select-image.vue";var Js=Bs.exports,zs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editContainer"},[e.user?s("form",{on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[s("label",{staticClass:"user-img-wrapper",attrs:{for:"image"},on:{click:e.editImage}},[s("img",{attrs:{src:e.newImage?e.newImage:e.editedUser.img,alt:"no image to display"}})]),s("label",[s("div",[e._v("Nickname:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.nickname,expression:"editedUser.nickname"}],attrs:{type:"text"},domProps:{value:e.editedUser.nickname},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"nickname",t.target.value)}}})]),s("label",[s("div",[e._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.password,expression:"editedUser.password"}],attrs:{type:"password"},domProps:{value:e.editedUser.password},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"password",t.target.value)}}})]),s("button",{attrs:{type:"submit"}},[e._v("Save")])]):e._e()])},Ws=[],Fs={name:"edit-user",data:function(){return{editedUser:{}}},computed:{user:function(){if(this.$store.getters.editUser)var e=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));else if(this.$store.getters.getLoggedUser){e=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));return this.editedUser=e,!0}return!1},newImage:function(){return this.$store.getters.getImageUrl}},methods:{editImage:function(){console.log("clicked");var e=this.editedUser;this.$store.commit({type:"setEditUser",editUser:e}),this.$router.push("/select-image/edit-user")},saveUser:function(){var e=this;this.editedUser.img=this.newImage;var t=this.editedUser;this.$store.dispatch({type:"updateUser",user:t}).then(function(t){e.$store.commit({type:"resetEditedUser"}),e.$store.commit({type:"resetNewUrl"}),e.$router.push("/user/".concat(t._id))})}}},Gs=Fs,Hs=(s("4453"),Object(_["a"])(Gs,zs,Ws,!1,null,"2a20a3e4",null));Hs.options.__file="edit-user.vue";var Ks=Hs.exports,Vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("form",{staticClass:"form-container",on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[s("img",{attrs:{src:e.img?e.img:"https://res.cloudinary.com/duxpc5ggn/image/upload/v1543435981/u1.jpg",alt:"",srcset:""}}),s("router-link",{staticClass:"camera-icon flex column center",attrs:{to:"/select-image"}},[s("i",{staticClass:"fas fa-camera"}),s("div",[e._v(e._s(e.img?"Edit":"Add")+" Photo")])]),s("div",{staticClass:"text-container"},[s("label",[s("span",[e._v("Nickanme:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.nickname,expression:"newUser.nickname"}],attrs:{type:"text",required:""},domProps:{value:e.newUser.nickname},on:{input:[function(t){t.target.composing||e.$set(e.newUser,"nickname",t.target.value)},e.checkNickname]}}),e.errorNickname.isErr?s("span",{attrs:{id:"error-input"}},[e._v(e._s(e.errorNickname.txt))]):e.newUser.nickname?s("span",{attrs:{id:"good-input"}},[e._v("Your nickname is good!")]):e._e()]),s("label",[s("span",[e._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{type:"password",required:""},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}})]),s("label",[s("span",[e._v("Repeat Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatPass,expression:"repeatPass"}],attrs:{type:"password",required:""},domProps:{value:e.repeatPass},on:{input:[function(t){t.target.composing||(e.repeatPass=t.target.value)},e.checkPassword]}})]),e.errorPass.isErr&&e.newUser.password?s("span",{attrs:{id:"error-input"}},[e._v(e._s(e.errorPass.txt))]):e.repeatPass?s("span",{attrs:{id:"good-input"}},[e._v("Your Password is great!")]):e._e(),s("button",{attrs:{disabled:!e.isValid}},[e._v("Save")])])],1)])},Ys=[],Qs={data:function(){return{newUser:{nickname:"",password:"",location:"",rate:1,dibs:[],dibsAns:[],itemList:[],wishList:[],historyChat:[],events:[],img:""},repeatPass:"",errorNickname:{isErr:!1,txt:"Your nickname is used"},errorPass:{isErr:!1,txt:"There problem with your password"}}},methods:{saveUser:function(){var e=this;this.$store.dispatch({type:"addUser",user:this.newUser}).then(function(){e.$router.push("/login")})},checkNickname:function(){var e=this;this.$store.dispatch({type:"getUserByName",userName:this.newUser.nickname.trim()}).then(function(t){e.errorNickname.isErr=!!t})},checkPassword:function(){this.newUser.password!==this.repeatPass?this.errorPass.isErr=!0:this.errorPass.isErr=!1}},computed:{img:function(){return this.$store.getters.getImageUrl},isValid:function(){return!(this.errorPass.isErr||this.errorNickname.isErr)&&""!==this.newUser.nickname&&""!==this.repeatPass}},created:function(){},components:{}},Xs=Qs,Zs=(s("9e1f"),Object(_["a"])(Xs,Vs,Ys,!1,null,"54bb49bb",null));Zs.options.__file="signup-page.vue";var ei=Zs.exports;i["a"].use(T["a"]);var ti=new T["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:je},{path:"/login",name:"login",component:Qe},{path:"/signup",name:"signup",component:ei},{path:"/dibs/:dibRoute?",name:"dibsPage",component:Ss},{path:"/select-image/:def?",name:"select-image",component:Js},{path:"/search",name:"search",component:Bt},{path:"/chat",name:"chat",component:Fe},{path:"/chat/user/:sellerId",name:"user-chat",component:it},{path:"/user/:userId",name:"user-page",component:Ps},{path:"/item/edit/:id?",name:"edit",component:At},{path:"/user/wishlist/:userId",name:"wishlist",component:pt},{path:"/user/edit/:userId",name:"edit-user",component:Ks},{path:"/item/details/:id",name:"item-details",component:xt},{path:"/about",name:"about",component:function(){return s.e("about").then(s.bind(null,"f820"))}}]}),si=(s("7514"),s("2f62"));i["a"].use(si["a"]);var ii={strict:!0,state:{loggedUser:null,bestSellers:null,editUser:null},mutations:{setEditUser:function(e,t){var s=t.editUser;e.editUser=s},resetEditedUser:function(e){e.editUser=null},setLoggedUser:function(e,t){var s=t.user;e.loggedUser=s},setBestSellers:function(e,t){var s=t.users;e.bestSellers=s},toggleWishlist:function(e,t){var s=e.loggedUser.wishList.indexOf(t);return-1===s?e.loggedUser.wishList.push(t):e.loggedUser.wishList.splice(s,1),Qt.edit(e.loggedUser).then(function(e){})},updateUserLocally:function(e,t){var s=t.user;e.loggedUser=s,Qt.updateUser(s)},logoutUser:function(e){e.loggedUser=null}},actions:{toggleWishlist:function(e,t){var s=t.id;return e.commit("toggleWishlist",s),Qt.edit(e.state.loggedUser).then(function(e){})},loadDibs:function(e){Qt.getById(e.state.loggedUser._id).then(function(t){l.save(a,t),e.commit({type:"setLoggedUser",user:t})})},checkUser:function(e,t){var s=t.user;return Qt.checkUser(s).then(function(t){return e.dispatch({type:"getLocation"}).then(function(e){return t.location=e,t})}).then(function(t){e.commit({type:"setLoggedUser",user:t})})},getUserById:function(e,t){e.commit;var s=t.userId;return Qt.getById(s).then(function(e){return e})},getUserWishlist:function(e,t){e.commit;var s=t.userId;return Qt.getUserWishlist(s).then(function(e){return e})},addUser:function(e,t){e.commit;var s=t.user;return Qt.edit(s).then(function(e){return e})},getBestSellers:function(e){var t=e.commit;return Qt.getUsers().then(function(e){return t({type:"setBestSellers",users:e}),e})},getUserByName:function(e,t){e.commit;var s=t.userName;return Qt.getByName(s).then(function(e){return e})},updateUser:function(e,t){var s=e.commit,i=t.user;return Qt.edit(i).then(function(e){return s({type:"updateUserLocally",user:e}),e})},logout:function(e){var t=e.commit;return Qt.logout().then(function(){l.clear(a),t({type:"logoutUser"})})}},getters:{getLoggedUser:function(e){return e.loggedUser},bestSellers:function(e){if(e.bestSellers)return e.bestSellers.filter(function(e){return"header"in e})},getEditUser:function(e){return e.editUser}}};s("20d6"),s("3022");i["a"].use(si["a"]);var ri={strict:!0,state:{items:[],newUrl:""},mutations:{resetNewUrl:function(e){e.newUrl=""},setItems:function(e,t){var s=t.items;e.items=s},editItem:function(e,t){var s=t.updatedItem,i=e.items,r=i.findIndex(function(e){return e._id===s._id});if(-1!==r)return i.splice(r,1,s);i.unshift(s)},setNewUrl:function(e,t){var s=t.url;e.newUrl=s}},actions:{removeItem:function(e,t){var s=t.item;Z.remove(s._id,s.sellerId).then(function(t){e.commit({type:"updateUserLocally",user:t})})},loadItems:function(e){var t=e.commit;Z.query().then(function(e){return t({type:"setItems",items:e}),e})},getItemById:function(e,t){e.commit;var s=t.itemId;return Z.getById(s).then(function(e){return e})},editItem:function(e,t){var s=e.commit,i=t.item;return Z.edit(i).then(function(e){return s({type:"editItem",updatedItem:e}),e})},saveImage:function(e,t){var s=e.commit;return Z.saveImage(t).then(function(e){s({type:"setNewUrl",url:e})})},addItem:function(e,t){var s=t.item;return Z.addItem(s).then(function(t){return e.dispatch({type:"getUserById",userId:t.sellerId}).then(function(t){e.commit({type:"updateUserLocally",user:t})}),t._id})}},getters:{itemsToDisplay:function(e){return e.items},getItems:function(e){return e.items},getImageUrl:function(e){return e.newUrl}}},ni=s("8468"),ai="/api/msg";function oi(e,t){return Q.a.get("".concat(ai,"?userId=").concat(e,"&userDest=").concat(t)).then(function(e){return e.data})}function ci(e){return Q.a.get("".concat(ai,"?userId=").concat(e)).then(function(e){return e.data})}function ui(e,t){return console.log("add by service"),Promise.resolve()}function li(){return Q.a.post("".concat(ai,"/disconnent"))}var di,mi,fi={queryMsgs:oi,queryRooms:ci,add:ui,disconnent:li},gi=s("8055"),pi=s.n(gi),hi="";function vi(e,t){return di=pi()(hi),di.emit("inline",e),t&&e&&di.emit("roomRequested",e,t),di.on("newMsg",function(t){t.from._id!==e&&g.$emit(d,t)}),di.on("got-dibs",function(t,s){console.log("got dibs from",t,"curr user",e),e===s.sellerId&&e!==t&&(console.log("got dibs from",t),g.$emit(m))}),di.on("got-ans",function(t){e===t.dib.from&&(console.log("got ans about",t.dib.item.title,t),g.$emit(m))}),di.on("got-cancle-dib",function(t){e===t.item.sellerId&&(console.log("got cancle about",t.item.title,"from",t.from),g.$emit(m))}),di.on("usersConnected",function(e){mi=e,console.log("room is ready",e)}),Promise.resolve(mi)}function bi(e,t){di.emit("dibs",e,t)}function _i(e){return di.emit("chat-newMsg",e,mi),mi}function yi(e){di.emit("sendAns",e)}function Ui(e){di.emit("cancelDibReq",e)}var Ci={connectSocket:vi,sendMsg:_i,sendDibs:bi,sendAns:yi,cancelDibReq:Ui};i["a"].use(si["a"]);var wi={strict:!0,state:{msgs:[],rooms:[]},mutations:{setMsgs:function(e,t){var s=t.msgs;e.msgs=s},setRooms:function(e,t){var s=t.rooms;e.rooms=s},sendMsg:function(e,t){var s=t.msg;Ci.sendMsg(s)},addMsg:function(e,t){var s=t.msg;e.msgs.push(s)},connectSocket:function(e,t){var s=t.userId,i=t.userDest;this.commit({type:"gotMsg"}),Ci.connectSocket(s,i)},gotMsg:function(e){var t=this;g.$on(d,function(e){t.commit({type:"addMsg",msg:e})})}},actions:{loadMsgs:function(e,t){var s=e.commit,i=t.userId,r=t.userDest;fi.queryMsgs(i,r).then(function(e){s({type:"setMsgs",msgs:e})})},loadRooms:function(e,t){var s=e.commit,i=t.userId;return fi.queryRooms(i).then(function(e){return s({type:"setRooms",rooms:e}),e})},sendMsg:function(e,t){var s=e.commit,i=t.msg,r=t.user;fi.add(i,r).then(function(){s({type:"sendMsg",msg:i}),s({type:"addMsg",msg:i})})},sendDibs:function(e,t){e.commit;var s=t.userId,i=t.item;Ci.sendDibs(s,i)},sendAns:function(e,t){e.commit;var s=t.ans;Ci.sendAns(s)},cancelDibReq:function(e,t){Object(ni["a"])(e);var s=t.dib;Ci.cancelDibReq(s)},disconnent:function(){return fi.disconnent()}},getters:{getMsgs:function(e){return e.msgs},getRooms:function(e){return e.rooms}}},ki="/api/item",Ii={getCatagories:$i,query:ji};function $i(){return Q.a.get("".concat(ki,"/search")).then(function(e){return e.data})}function ji(e){var t=e.filter;if(!t.byTxt&&!t.byType)return Promise.resolve([]);var s="?";return s+=t.byTxt?"&text=".concat(t.byTxt):"",s+=t.byType?"&type=".concat(t.byType):"",Q.a.get("".concat(ki,"/filter/").concat(s)).then(function(e){return e.data})}i["a"].use(si["a"]);var xi={strict:!0,state:{catagories:[],itemsToDisplay:[]},mutations:{setCatagories:function(e,t){var s=t.catagories;e.catagories=s},setItemsToDisplay:function(e,t){var s=t.itemsToDisplay;e.itemsToDisplay=s}},actions:{getAllCatagories:function(e){var t=e.commit;return Ii.getCatagories().then(function(e){return t({type:"setCatagories",catagories:e}),e})},filterItems:function(e,t){var s=e.commit;return Ii.query(t).then(function(e){return s({type:"setItemsToDisplay",itemsToDisplay:e}),e})}},getters:{getAllCatagories:function(e){return e.catagories},getItemsToDisplay:function(e){return e.itemsToDisplay}}},Li={calcDistance:Mi};function Mi(e,t){var s=6371,i=Di(t.lat-e.lat),r=Di(t.lng-e.lng),n=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Di(e.lat))*Math.cos(Di(e.lng))*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),o=s*a;return o.toFixed(2)}function Di(e){return e*(Math.PI/180)}i["a"].use(si["a"]);var Si=new si["a"].Store({strict:"true",modules:{itemModule:ri,userModule:ii,msgModule:wi,searchModule:xi},state:{isMenu:!1},mutations:{toggleMenu:function(e){e.isMenu=!e.isMenu,console.log("state isMenu",e.isMenu)}},actions:{getLocation:function(){return new Promise(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var s={lng:t.coords.longitude,lat:t.coords.latitude};e(s)},t):t("no geolocation in navigator")})}},getters:{isMenu:function(e){return e.isMenu},user:function(e){return e.loggedUser},someMethod:function(e){return function(t){return e.things.find(function(e){return e.id===t})}},getDistance:function(e){return function(t){var s=e.userModule.loggedUser.location;return Li.calcDistance(s,t)}}}}),Oi=s("2ead"),Ni=s.n(Oi),Ai=s("7f45"),Pi=s.n(Ai),Ei=s("755e"),Ti=s("92d5"),Ri=s.n(Ti),qi=(s("c4ca"),s("9483"));Object(qi["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});s("c1c3");i["a"].use(Ri.a),i["a"].use(Ni.a,{moment:Pi.a}),i["a"].use(Ei,{load:{key:"AIzaSyA4fRJvLkBs3sem_ym7juIhLPuavgF9I08",libraries:"places"}}),i["a"].config.productionTip=!1,i["a"].filter("relativeTime",function(e){return Pi()(e).format("L")}),new i["a"]({router:ti,store:Si,VueCarousel:fe.a,render:function(e){return e(E)}}).$mount("#app")},"57d9":function(e,t,s){},5848:function(e,t,s){},"5c0b":function(e,t,s){"use strict";var i=s("5e27"),r=s.n(i);r.a},"5e27":function(e,t,s){},"647d":function(e,t,s){"use strict";var i=s("793c"),r=s.n(i);r.a},"689d":function(e,t,s){},"6b32":function(e,t,s){"use strict";var i=s("2073"),r=s.n(i);r.a},"70bc":function(e,t,s){"use strict";var i=s("1ede"),r=s.n(i);r.a},"78fe":function(e,t,s){"use strict";var i=s("f97b"),r=s.n(i);r.a},"793c":function(e,t,s){},"7f51":function(e,t,s){},8192:function(e,t,s){},"829e":function(e,t,s){"use strict";var i=s("8192"),r=s.n(i);r.a},"9e0b":function(e,t,s){"use strict";var i=s("7f51"),r=s.n(i);r.a},"9e1f":function(e,t,s){"use strict";var i=s("57d9"),r=s.n(i);r.a},a4e3:function(e,t,s){"use strict";var i=s("496c"),r=s.n(i);r.a},add1:function(e,t,s){"use strict";var i=s("1794"),r=s.n(i);r.a},b0f7:function(e,t,s){},bcc9:function(e,t,s){},bda8:function(e,t,s){"use strict";var i=s("365f"),r=s.n(i);r.a},c1c3:function(e,t,s){},c70e:function(e,t,s){"use strict";var i=s("e481"),r=s.n(i);r.a},cd03:function(e,t,s){},d446:function(e,t,s){},d822:function(e,t,s){"use strict";var i=s("da33"),r=s.n(i);r.a},d8de:function(e,t,s){"use strict";var i=s("5848"),r=s.n(i);r.a},da33:function(e,t,s){},e481:function(e,t,s){},e918:function(e,t,s){},ec60:function(e,t,s){},ed73:function(e,t,s){"use strict";var i=s("b0f7"),r=s.n(i);r.a},f168:function(e,t,s){"use strict";var i=s("d446"),r=s.n(i);r.a},f97b:function(e,t,s){},f9c5:function(e,t,s){"use strict";var i=s("0928"),r=s.n(i);r.a}});
//# sourceMappingURL=app.f5f29746.js.map