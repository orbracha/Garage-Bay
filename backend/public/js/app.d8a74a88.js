(function(e){function t(t){for(var i,a,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)a=o[d],r[a]&&f.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(f.length)f.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={app:0},n=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"08b9":function(e,t,s){e.exports=s.p+"img/dibs_stamp.c5c496ad.svg"},"08ec":function(e,t,s){},"0928":function(e,t,s){},"0ea3":function(e,t,s){},1:function(e,t){},"109d":function(e,t,s){},"1e06":function(e,t,s){"use strict";var i=s("6652"),r=s.n(i);r.a},"21bb":function(e,t,s){"use strict";var i=s("bcc9"),r=s.n(i);r.a},2667:function(e,t,s){"use strict";var i=s("ec60"),r=s.n(i);r.a},3392:function(e,t,s){},"3af7":function(e,t,s){},4092:function(e,t,s){"use strict";var i=s("08ec"),r=s.n(i);r.a},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840d","./gl.js":"8840d","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return s(t)}function n(e){var t=i[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}r.keys=function(){return Object.keys(i)},r.resolve=n,e.exports=r,r.id="4678"},"4a65":function(e,t,s){"use strict";var i=s("109d"),r=s.n(i);r.a},"4aed":function(e,t,s){},"4bbb":function(e,t,s){"use strict";var i=s("4aed"),r=s.n(i);r.a},"4e41":function(e,t,s){"use strict";var i=s("95b6"),r=s.n(i);r.a},"51e2":function(e,t,s){"use strict";var i=s("e918"),r=s.n(i);r.a},"547c":function(e,t,s){"use strict";var i=s("fe4d"),r=s.n(i);r.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("garage-header"),s("router-view",{staticClass:"router-view"}),s("menu-screen"),s("garage-footer")],1)},n=[],a="loggedInUser";function o(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function c(e,t){localStorage[e]=JSON.stringify(t)}function u(e){localStorage.removeItem(e)}var l={load:o,save:c,clear:u},d="get-msg",f="dibs",m=new i["default"],g=m,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer",class:{open:e.isMenu}},[s("section",{staticClass:"footer-icons-wrapper"},[s("router-link",{staticClass:"footer-item footer-item-1",attrs:{to:"/"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-home"}),s("p",[e._v("Home")])])]),s("router-link",{staticClass:"footer-item footer-item-4",attrs:{to:e.user?"/chat":"/login"}},[s("div",{staticClass:"flex row center chat-footer",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-comment-alt"}),s("p",[e._v("Chat")]),e.user&&e.user.historyChat.length?s("span",{staticClass:"chat-notification"},[e._v(e._s(e.user.historyChat.length))]):e._e()])]),s("router-link",{staticClass:"footer-item footer-item-5",attrs:{to:"/select-image/item"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-plus"}),s("p",[e._v("Sell item")])])]),e.user?s("router-link",{staticClass:"footer-item footer-item-3",attrs:{userId:e.user._id,to:"/user/wishlist/"+e.user._id}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-heart"}),s("p",[e._v("Wishlist")])])]):s("router-link",{staticClass:"footer-item footer-item-3",attrs:{to:"/login"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"far fa-heart"}),s("p",[e._v("Wishlist")])])]),e.user?s("router-link",{staticClass:"footer-item footer-item-2 flex row",attrs:{to:"/user/"+e.user._id}},[s("i",{staticClass:"fas fa-user"},[e.user.dibsAns.filter(function(e){return e.isAns}).length||e.user.dibs.length?s("span",{staticClass:"footer-notification"},[e._v(e._s(e.user.dibsAns.filter(function(e){return e.isAns}).length+e.user.dibs.length))]):e._e()]),s("p",[e._v("My profile")])]):s("router-link",{staticClass:"footer-item footer-item-2",attrs:{to:"/login"}},[s("div",{staticClass:"flex row center",on:{click:e.toggleMenu}},[s("i",{staticClass:"fas fa-user"}),s("p",[e._v("My profile")])])])],1)])},p=[],v={name:"garage-footer",methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},b=v,_=(s("a4d8"),s("2877")),y=Object(_["a"])(b,h,p,!1,null,"90cd6fea",null);y.options.__file="garage-footer.vue";var C=y.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"home-header flex row between center"},[s("div",{staticClass:"logo-container flex row center"},[s("div",{staticClass:"burger"},[e.isMenu?s("i",{staticClass:"fas fa-times",on:{click:e.toggleMenu}}):s("i",{staticClass:"fas fa-bars",on:{click:e.toggleMenu}})]),s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"logo-text"},[e._v("dibs")])])],1),s("div",{staticClass:"header-icons-container"},[e.user?s("div",{staticClass:"flex row center"},[s("div",{staticClass:"search-container"},[s("router-link",{attrs:{to:"/search"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterTxt,expression:"filterTxt"}],attrs:{placeholder:"Search items",type:"text"},domProps:{value:e.filterTxt},on:{input:[function(t){t.target.composing||(e.filterTxt=t.target.value)},e.search]}})]),s("i",{staticClass:"fas fa-search"})],1),s("section",{staticClass:"user-icon-text"},[s("div",[e._v("Hello "+e._s(e.user.nickname))]),s("a",{staticClass:"logoutBtn",on:{click:e.logoutUser}},[e._v("Logout")])]),s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/user/"+e.user._id}},[s("i",{staticClass:"fas fa-user"}),e.user.dibsAns.filter(function(e){return e.isAns}).length||e.user.dibs.length?s("span",{staticClass:"notification"},[e._v(e._s(e.user.dibsAns.filter(function(e){return e.isAns}).length+e.user.dibs.length))]):e._e()])],1):s("div",[s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/login"}},[e._v("Login")]),e._v(" |\n      "),s("router-link",{staticClass:"header-profile-icon",attrs:{to:"/signup"}},[e._v("Signup")])],1)])])},U=[],w={data:function(){return{filterTxt:""}},methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})},logoutUser:function(){var e=this;this.$store.dispatch({type:"disconnentChat",user:this.user}),this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})},search:function(){this.$store.commit({type:"setFilterTxt",txt:this.filterTxt})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},$=w,I=(s("4e41"),Object(_["a"])($,k,U,!1,null,"d5fb59de",null));I.options.__file="garage-header.vue";var j=I.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"screen",class:{open:e.isMenu},on:{click:e.toggleMenu}})},L=[],M={methods:{toggleMenu:function(){this.$store.commit({type:"toggleMenu"})}},computed:{isMenu:function(){return this.$store.state.isMenu},user:function(){return this.$store.getters.getLoggedUser}}},S=M,D=(s("4a65"),Object(_["a"])(S,x,L,!1,null,"b1da7bd0",null));D.options.__file="screen.vue";var O=D.exports,A={components:{garageFooter:C,garageHeader:j,menuScreen:O},methods:{},created:function(){var e=this,t=l.load(a);t&&this.$store.dispatch({type:"checkUser",user:t}).then(function(){e.$store.commit({type:"connectSocket",userId:e.$store.getters.getLoggedUser._id}),g.$on(f,function(){e.$store.dispatch({type:"loadChange"})}),g.$on(d,function(t){e.$store.commit({type:"addMsg",msg:t}),e.$store.dispatch({type:"loadChange"})})})}},N=A,T=(s("5c0b"),Object(_["a"])(N,r,n,!1,null,null,null));T.options.__file="App.vue";var E=T.exports,R=(s("7f7f"),s("8c4f")),P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[e.isLoading?i("img",{staticClass:"loading",attrs:{src:s("fe2b"),alt:"",srcset:""}}):i("div",{staticClass:"home"},[i("div",{staticClass:"info-section flex column"},[i("h1",{staticClass:"home-page-text"},[e._v("Garage Sale Online")]),e._m(0),e.bestSellers?i("garage-carousel",{attrs:{bestSellers:e.bestSellers}}):e._e()],1),i("section",{staticClass:"home-content"},[i("item-list",{staticClass:"item-list",attrs:{items:e.items}})],1)])])},B=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"home-page-pre"},[e._v("\n        Search , Pick\n        "),s("span",[e._v("&")]),e._v(" Call Dibs!\n      ")])}],q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("ul",{staticClass:"home-list"},e._l(e.items,function(e){return s("item-preview",{key:e._id,attrs:{item:e}})}))])},J=[],F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.item&&!e.isUserItem?i("li",{staticClass:"item-preview-container"},[i("section",{staticClass:"main-list-item",on:{click:function(t){e.itemClicked(e.item._id)}}},[i("div",{staticClass:"seller-preview",on:{click:function(t){t.stopPropagation(),e.userClicked(e.seller._id)}}},[e.seller.img?i("img",{staticClass:"seller-thumbnail",attrs:{src:e.seller.img}}):e._e(),i("div",[i("h3",[e._v(e._s(e.seller.nickname))]),e.loggedUser?i("div",[e._v(e._s(e.distance)+" Km away")]):e._e()])]),i("div",{staticClass:"img-wrapper"},[i("section",[e.wishlist?i("i",{staticClass:"fas fa-heart full-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}}):i("i",{staticClass:"fas fa-heart empty-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}})]),e.isDibs?i("section",[i("img",{staticClass:"dibs-stamp",attrs:{src:s("08b9")}})]):e._e(),e.item.img?i("img",{staticClass:"main-list-img",attrs:{src:e.item.img}}):e._e()]),i("div",{staticClass:"main-item-details"},[i("div",{staticClass:"main-list-header"},[e._v(e._s(e.item.title))]),i("div",{staticClass:"item-desc-prev"},[e._v(e._s(e.item.desc))]),i("div",[e._v(e._s(e.item.price?"$"+e.item.price:"FREE"))])])])]):e._e()},z=[],W={props:{item:Object},methods:{toggleWishlist:function(){var e=this.item._id;if(!this.loggedUser)return this.$router.push("/login");this.$store.dispatch({type:"toggleWishlist",id:e})},userClicked:function(e){this.$router.push("/user/".concat(e))},itemClicked:function(e){this.$router.push("/item/details/".concat(e))}},computed:{userWishlist:function(){if(this.loggedUser)return this.loggedUser.wishList},isUserItem:function(){var e=this;return!!this.loggedUser&&this.loggedUser.itemList.some(function(t){return t===e.item._id})},isDibs:function(){if(this.item.callDibs)return this.item.callDibs.length>0},seller:function(){return this.item.user},wishlist:function(){var e=this.item._id;if(this.loggedUser)return this.loggedUser.wishList.some(function(t){return t===e})},distance:function(){var e=this.item.location;return this.$store.getters.getDistance(e)},loggedUser:function(){return this.$store.getters.getLoggedUser}}},G=W,H=(s("fa88"),Object(_["a"])(G,F,z,!1,null,"925a1568",null));H.options.__file="item-preview.vue";var Y=H.exports,K=s("ade3"),V=s("bc3a"),Q=s.n(V),X="/api/item",Z=Object(K["a"])({query:ee,getById:te,remove:se,edit:ie,saveImage:re,addItem:ne},"remove",se);function ee(){return Q.a.get("".concat(X)).then(function(e){return e.data})}function te(e){return Q.a.get("".concat(X,"/").concat(e)).then(function(e){return e.data})}function se(e,t){return Q.a.delete("".concat(X,"/").concat(e,"/").concat(t)).then(function(e){return e.data[0]})}function ie(e){return e._id?Q.a.put("".concat(X,"/edit"),e).then(function(e){return console.log("res.data:",e.data),e.data}):Q.a.post("".concat(X),e)}function re(e){return Q.a.post("".concat(X,"/add-image"),e).then(function(e){return e.data})}function ne(e){return Q.a.post("".concat(X,"/add-item"),e).then(function(e){return e.data})}var ae={props:{items:Array},components:{itemPreview:Y,itemService:Z}},oe=ae,ce=(s("9ce3"),Object(_["a"])(oe,q,J,!1,null,"433fb0f0",null));ce.options.__file="item-list.vue";var ue=ce.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("carousel",{staticClass:"carousel",attrs:{loop:!0,"per-page":1,navigationEnabled:!1,"mouse-drag":!1}},e._l(e.bestSellers,function(e){return s("slide",{key:e._id},[s("garage-card",{attrs:{user:e}})],1)}))},de=[],fe=s("0a63"),me=s.n(fe),ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"garage-card",on:{click:function(t){e.sellerClicked(e.user._id)}}},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.user.header}})]),s("div",{staticClass:"garage-card-content flex column"},[s("img",{staticClass:"garage-card-user-img",attrs:{src:e.user.img}}),s("div",{staticClass:"seller-info flex column"},[s("h3",[e._v(e._s(e.user.nickname)+"'s Garage")]),s("h3",[e._v("Specializes in "+e._s(e.user.desc))]),s("div",{staticClass:"rating"},[e._l(e.user.rate,function(e){return s("span",{key:e,staticClass:"fa fa-star checked"})}),e._l(5-e.user.rate,function(e){return s("span",{key:e.idx,staticClass:"fa fa-star empty-star"})})],2)]),s("div",[e._v("Selling: "+e._s(e.user.listedItems.length)+" items")])])])},he=[],pe={props:["user"],methods:{sellerClicked:function(e){this.$router.push("/user/".concat(e))}}},ve=pe,be=(s("d822"),Object(_["a"])(ve,ge,he,!1,null,null,null));be.options.__file="garage-card.vue";var _e=be.exports,ye={props:["bestSellers"],components:{Carousel:fe["Carousel"],Slide:fe["Slide"],garageCard:_e}},Ce=ye,ke=(s("2667"),Object(_["a"])(Ce,le,de,!1,null,null,null));ke.options.__file="garage-carousel.vue";var Ue=ke.exports,we={name:"home",components:{itemList:ue,garageCarousel:Ue,menuScreen:O},data:function(){return{isLoading:!0}},created:function(){var e=this;window.scrollTo(0,0),this.$store.dispatch({type:"loadItems"}).then(function(t){e.isLoading=!1}),this.$store.dispatch({type:"getBestSellers"}).then(function(t){e.best=!1})},computed:{items:function(){return this.$store.getters.itemsToDisplay},user:function(){return this.$store.getters.getLoggedUser},bestSellers:function(){return this.$store.getters.bestSellers},countOfDibsAns:function(){return this.user.dibsAns.filter(function(e){return e.isAns}).length}}},$e=we,Ie=(s("21bb"),Object(_["a"])($e,P,B,!1,null,null,null));Ie.options.__file="Home.vue";var je=Ie.exports,xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"chat-page-container"},[e.isLoading?i("img",{staticClass:"loading-chat",attrs:{src:s("fe2b"),alt:"",srcset:""}}):[e.rooms.length?i("chat-list",{attrs:{data:e.userRooms}}):i("h1",[e._v("You don't have chats yet..")])]],2)},Le=[],Me=(s("7514"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",e._l(e.data,function(e,t){return s("chat-preview",{key:t,attrs:{item:e}})}))}),Se=[],De=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{attrs:{to:e.item.link}},[s("li",{class:{newMsg:e.item.isNewMsg}},[s("span",{staticClass:"available",class:{offline:!e.item.isAvailable,inline:e.item.isAvailable}}),e.item.img?s("img",{attrs:{src:e.item.img}}):e._e(),s("div",[s("div",{staticClass:"chat-head"},[e._v(e._s(e.item.title))]),s("p",[e._v(e._s(e.item.txt))])])])])},Oe=[],Ae={props:["item"]},Ne=Ae,Te=(s("1e06"),Object(_["a"])(Ne,De,Oe,!1,null,"7db94ae4",null));Te.options.__file="chat-preview.vue";var Ee=Te.exports,Re={props:{data:Array},components:{chatPreview:Ee}},Pe=Re,Be=(s("51e2"),Object(_["a"])(Pe,Me,Se,!1,null,null,null));Be.options.__file="chat-list.vue";var qe=Be.exports,Je={data:function(){return{userRooms:[],isLoading:!0,newMsgs:[]}},computed:{rooms:function(){return this.$store.getters.getRooms},loggedUser:function(){return this.$store.getters.getLoggedUser}},methods:{getUserRooms:function(){var e=this;console.log(this.rooms);var t=this;return this.rooms.map(function(s){if(s.userId===e.loggedUser._id)var i=s.userDest;else i=s.userId;console.log(i),e.$store.dispatch({type:"getUserById",userId:i}).then(function(r){t.userRooms.push({txt:s.historyMsgs.length?s.historyMsgs[s.historyMsgs.length-1].txt:"",title:r.nickname,img:r.img,link:"/chat/user/".concat(i),isAvailable:r.isAvailable,isNewMsg:e.checkNewMsg(r._id)}),e.isLoading=!1,e.orderRooms()})})},checkNewMsg:function(e){var t=this.newMsgs.find(function(t){return t.from._id===e});return!!t},orderRooms:function(){if(this.newMsgs.length)for(var e=0;e<this.userRooms.length;e++)for(var t=0;t<this.newMsgs.length;t++)if(this.userRooms[e].title===this.newMsgs[t].nickname){console.log("in");var s=room;this.userRooms.splice(idx,1),this.userRooms.unshift(s);break}}},created:function(){var e=this;window.scrollTo(0,0);var t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));this.newMsgs=t.historyChat,t.historyChat=[],this.$store.dispatch({type:"updateUser",user:t}).then(function(){e.$store.dispatch({type:"loadRooms",userId:t._id}).then(function(){e.rooms.length?e.getUserRooms():e.isLoading=!1})})},components:{chatList:qe}},Fe=Je,ze=(s("a207"),Object(_["a"])(Fe,xe,Le,!1,null,"99729642",null));ze.options.__file="chat-page.vue";var We=ze.exports,Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",{staticClass:"login-page page-layout flex column"},[s("el-form",{ref:"user",staticClass:"demo-ruleForm",attrs:{model:e.user,"status-icon":"",rules:e.rules2,"label-width":"120px"},on:{submit:function(t){return t.preventDefault(),e.checkUser(t)}}},[s("el-form-item",{attrs:{label:"Nickname",prop:"nickname"}},[s("el-input",{model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),s("el-form-item",{attrs:{label:"Password",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.checkUser}},[e._v("Login")]),s("el-button",{on:{click:function(t){e.resetForm("user")}}},[e._v("Reset")])],1)],1),s("p",[e._v("New Here?")]),s("router-link",{attrs:{to:"/signup"}},[s("button",{staticClass:"sign-btn"},[e._v("Sign up!")])]),s("p",[e._v("or")]),s("router-link",{attrs:{to:"/"}},[s("button",{staticClass:"sign-btn"},[e._v("Continue as a guest")])])],1)])},He=[],Ye={name:"login",data:function(){var e=this,t=function(t,s,i){""===s?i(new Error("Please input the password")):(""!==e.user.checkPass&&e.$refs.user.validateField("checkPass"),i())};return{user:{password:"",nickname:""},rules2:{password:[{validator:t,trigger:"blur"}],nickname:[{required:!0,message:"Please input a name",trigger:"blur"},{min:2,max:8,message:"Length should be 2 to 8",trigger:"blur"}]},isUnknowen:!1}},methods:{resetForm:function(e){this.$refs[e].resetFields()},checkUser:function(){var e=this,t=JSON.parse(JSON.stringify(this.user));this.$store.dispatch({type:"checkUser",user:t}).then(function(){e.$router.push("/")}).catch(function(){e.isUnknowen=!0,setTimeout(function(){return e.isUnknowen=!1},2e3)})}}},Ke=Ye,Ve=(s("ec52"),Object(_["a"])(Ke,Ge,He,!1,null,"5b8d0e49",null));Ve.options.__file="login-page.vue";var Qe=Ve.exports,Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{ref:"chatContainer",staticClass:"chat-container"},[s("div",{ref:"chatMsgs",staticClass:"chat-msgs"},e._l(e.msgs,function(t,i){return s("div",{key:i,staticClass:"message",class:{"loggedin-side":t.from._id===e.loggedUser._id,"userChat-side":t.from._id!==e.loggedUser._id}},[s("img",{attrs:{src:t.from.img,alt:"",srcset:""}}),e._v("\n      "+e._s(t.txt)+"\n      "),s("p",{staticClass:"msg-time"},[e._v(e._s(e._f("relativeTime")(t.createAt)))])])})),s("div",{staticClass:"chat-text"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newMsg.txt,expression:"newMsg.txt"}],ref:"chat",attrs:{type:"text",required:""},domProps:{value:e.newMsg.txt},on:{input:function(t){t.target.composing||e.$set(e.newMsg,"txt",t.target.value)}}}),e._m(0)])])])},Ze=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"send"},[s("i",{staticClass:"far fa-paper-plane"})])}],et={data:function(){return{newMsg:{from:"",txt:"",createAt:""},loggedUser:null}},computed:{msgs:function(){return this.$store.getters.getMsgs}},methods:{sendMsg:function(){var e=this;console.log("send msg",this.newMsg),this.newMsg.from={_id:this.loggedUser._id,nickname:this.loggedUser.nickname,img:this.loggedUser.img},this.newMsg.createAt=Date.now();var t=JSON.parse(JSON.stringify(this.newMsg));this.$store.dispatch({type:"sendMsg",msg:t,userId:this.loggedUser._id}).then(function(){e.newMsg={from:"",txt:""}})}},created:function(){this.loggedUser=this.$store.getters.getLoggedUser;var e=this.$route.params.sellerId;this.$store.commit({type:"roomRequested",userId:this.loggedUser._id,userDest:e}),this.$store.dispatch({type:"loadMsgs",userId:this.loggedUser._id,userDest:e}).then(function(){window.scrollTo(0,document.body.scrollHeight)})},mounted:function(){this.$refs.chat.focus(),window.scrollTo(0,document.body.scrollHeight)},destroyed:function(){this.$store.dispatch({type:"disconnectRoom",userId:this.loggedUser._id})},watch:{msgs:{handler:function(){this.$nextTick(function(){window.scrollTo(0,document.body.scrollHeight)})},immediate:!0}}},tt=et,st=Object(_["a"])(tt,Xe,Ze,!1,null,null,null);st.options.__file="user-chat.vue";var it=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("section",{staticClass:"wishlist-container"},[s("h1",{staticClass:"home-page-text"},[e._v("My Wishlist")]),e.isLoadin?s("section",{staticClass:"loading"},[e._v("Loading...")]):s("items-thumbnail",{attrs:{list:e.wishlist}})],1)])},nt=[],at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"items-thumbnail"},e._l(e.list,function(t,i){return s("li",{key:i,on:{click:function(s){e.itemClicked(t._id)}}},[s("div",{staticClass:"img-container"},[s("img",{staticClass:"img-thumb",attrs:{src:t.img}})])])}))},ot=[],ct={props:["list"],methods:{itemClicked:function(e){this.$router.push("/item/details/".concat(e))}}},ut=ct,lt=(s("9e0b"),Object(_["a"])(ut,at,ot,!1,null,"155cc23f",null));lt.options.__file="item-thumbnail.vue";var dt=lt.exports,ft={name:"home",components:{itemsThumbnail:dt},data:function(){return{isLoadin:!0,wishlist:[]}},methods:{itemClicked:function(e){this.$router.push("/item/details/".concat(e))},getUserWishlist:function(){var e=this.$store.getters.getLoggedUser._id,t=this;this.$store.dispatch({type:"getUserWishlist",userId:e}).then(function(e){t.wishlist=e.wishlistItems,t.isLoadin=!1}).catch(function(e){return console.log("ERROOOR")})}},watch:{"$route.params.userId":{handler:function(){this.getUserWishlist()},immediate:!0}}},mt=ft,gt=(s("7cb3"),Object(_["a"])(mt,rt,nt,!1,null,"524f9442",null));gt.options.__file="wish-page.vue";var ht=gt.exports,pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-container flex column"},[e.isLoaded?[i("header",{staticClass:"details-header flex row"},[i("div",{staticClass:"header-content"},[i("h3",[e._v(e._s(e.currItem.title))]),i("span",{attrs:{id:"item-created"}},[e._v("Listed : "+e._s(e._f("relativeTime")(e.currItem.createAt)))]),e.isLoggedUser?i("div",{staticClass:"edit-btn-container"},[i("router-link",{attrs:{to:"/item/edit/"+e.currItem._id}},[i("i",{staticClass:"far fa-edit edit-item"})]),i("i",{staticClass:"far fa-trash-alt",on:{click:e.removeItem}})],1):e._e()]),i("router-link",{attrs:{to:"/user/"+e.currSeller._id}},[i("img",{staticClass:"details-seller-img",attrs:{src:e.currSeller.img,alt:"placeholder image"}})])],1),i("section",{staticClass:"item-content flex column"},[i("div",{staticClass:"img-details-container",style:{backgroundImage:"url("+e.currItem.img+")"}},[e.currItem.callDibs.length>0?i("img",{staticClass:"dibs-stamp",attrs:{src:s("08b9"),alt:"",srcset:""}}):e._e()]),i("div",{staticClass:"details-container"},[i("div",[i("div",[i("p",{staticClass:"item-desc"},[e._v(e._s(e.currItem.desc))]),i("p",[i("i",{staticClass:"fas fa-map-marker-alt"}),e._v("\n              "+e._s(e.distance)+" Km away\n            ")]),i("p",[e._v("Condition: "+e._s(e.currItem.condition))]),i("p",{staticClass:"price-bold"},[e._v("Price: "+e._s(e.currItem.price?"$"+e.currItem.price:"FREE"))])]),i("div",{staticClass:"action-btn-container flex row"},[e.loggedUser&&!e.isLoggedUser?i("section",{staticClass:"heart"},[e.wishlist?i("i",{staticClass:"fas fa-heart full-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}}):i("i",{staticClass:"fas fa-heart empty-heart",on:{click:function(t){return t.stopPropagation(),e.toggleWishlist(t)}}})]):e._e(),e.loggedUser&&!e.isLoggedUser?i("router-link",{attrs:{to:"/chat/user/"+e.currSeller._id}},[i("i",{staticClass:"far fa-comment-alt"})]):e._e(),!e.loggedUser||e.isLoggedUser||e.currItem.callDibs.includes(e.loggedUser._id)?e._e():i("button",{staticClass:"dibs-btn",on:{click:e.sendDibs}},[e._v("Dib It!")]),e.loggedUser?e._e():i("button",{staticClass:"dibs-btn",on:{click:function(t){e.$router.push("/login")}}},[e._v("Call dibs!")])],1)]),i("google-map",{attrs:{itemCoords:e.currItem.location}})],1)])]:i("img",{staticClass:"loading",attrs:{src:s("fe2b"),alt:"",srcset:""}})],2)},vt=[],bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.center,zoom:13}},[s("gmap-marker",{attrs:{position:e.marker.position,clickable:!0},on:{click:e.toggleInfoWin}},[e.isLoaded?s("info-window",{attrs:{opened:e.marker.isInfoOpen}},[e._v(e._s(e.address))]):e._e()],1)],1)],1)},_t=[],yt=s("54f9"),Ct={name:"GoogleMap",components:{InfoWindow:yt["default"]},props:["itemCoords"],data:function(){return{center:{lat:32.088032,lng:34.803139},marker:{position:{lat:this.itemCoords.lat,lng:this.itemCoords.lng},isInfoOpen:!1},address:"No valid address",isLoaded:!1}},mounted:function(){this.geolocate(),this.checkIfLoaded()},created:function(){},methods:{checkIfLoaded:function(){var e=this;this.$refs.mapRef.$mapPromise.then(function(){return e.isLoaded=!0,e.reverseGeolocate()}).then(function(t){return e.address=t})},reverseGeolocate:function(){var e=new google.maps.Geocoder,t={};return t.lat=this.marker.position.lat,t.lng=this.marker.position.lng,new Promise(function(s,i){e.geocode({location:t},function(e,t){"OK"==t&&s(e[0].formatted_address)})})},toggleInfoWin:function(){this.marker.isInfoOpen=!this.marker.isInfoOpen},geolocate:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){e.center={lat:t.coords.latitude,lng:t.coords.longitude}})}}},kt=Ct,Ut=Object(_["a"])(kt,bt,_t,!1,null,null,null);Ut.options.__file="GoogleMap.vue";var wt=Ut.exports,$t={name:"item-details",components:{GoogleMap:wt},data:function(){return{currItem:{},currSeller:{},isLoaded:!1,distance:0}},created:function(){var e=this,t=this.$route.params.id;this.$store.dispatch({type:"getItemById",itemId:t}).then(function(t){e.currItem=t;var s=e.currItem.sellerId;e.$store.dispatch({type:"getUserById",userId:s}).then(function(t){e.currSeller=t,e.isLoaded=!0;var s=e.currItem.location;e.distance=e.$store.getters.getDistance(s)})})},methods:{toggleWishlist:function(){var e=this.currItem._id;if(!this.loggedUser)return this.$router.push("/login");this.$store.dispatch({type:"toggleWishlist",id:e})},sendDibs:function(){var e=this;if(this.loggedUser){var t=JSON.parse(JSON.stringify(this.currItem));t.callDibs.push(this.loggedUser._id),this.currItem.callDibs.push(this.loggedUser._id),this.$store.dispatch({type:"editItem",item:t}).then(function(t){delete t.user,e.$store.dispatch({type:"sendDibs",userId:e.loggedUser._id,item:t});var s=JSON.parse(JSON.stringify(e.loggedUser));s.dibsAns.unshift({isAns:!1,item:t}),e.$store.dispatch({type:"updateUser",user:s})})}else this.$router.push("/login")},removeItem:function(){var e=this;this.$swal({title:"Are you sure?",text:"You can't revert your action",type:"warning",showCancelButton:!0,confirmButtonText:"Yes Delete it!",cancelButtonText:"No, Keep it!",showCloseButton:!0,showLoaderOnConfirm:!0}).then(function(t){if(t.value){e.$swal("Deleted","You successfully deleted this item","success");var s=e.currItem;e.$store.dispatch({type:"removeItem",item:s}).then(function(){e.$router.push("/")})}else e.$swal("Cancelled","Your item is still intact","info")})},chatClicked:function(){this.$router.push("/chat")}},computed:{wishlist:function(){var e=this.currItem._id;if(this.loggedUser)return this.loggedUser.wishList.some(function(t){return t===e})},relativeTime:function(e){moment(e).fromNow()},imgSrc:function(){this.currSeller.img},isLoggedUser:function(){if(this.loggedUser){var e=this.$store.getters.getLoggedUser._id;return e===this.currSeller._id}return!1},loggedUser:function(){return this.$store.getters.getLoggedUser}}},It=$t,jt=(s("547c"),Object(_["a"])(It,pt,vt,!1,null,"d9ef2a38",null));jt.options.__file="item-details.vue";var xt=jt.exports,Lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"edit-item-container"},[s("div",{staticClass:"edit-form"},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"Title",required:""},model:{value:e.currItem.title,callback:function(t){e.$set(e.currItem,"title",t)},expression:"currItem.title"}})],1),s("el-form-item",[s("el-select",{attrs:{placeholder:"Category"},model:{value:e.currItem.category,callback:function(t){e.$set(e.currItem,"category",t)},expression:"currItem.category"}},e._l(e.catagories,function(t){return s("el-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),s("el-form-item",[s("el-select",{attrs:{placeholder:"Condition"},model:{value:e.currItem.condition,callback:function(t){e.$set(e.currItem,"condition",t)},expression:"currItem.condition"}},[s("el-option",{attrs:{value:"likeNew"}},[e._v("Like new")]),s("el-option",{attrs:{value:"used"}},[e._v("Used")])],1)],1),s("el-form-item",[s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"Description"},model:{value:e.currItem.desc,callback:function(t){e.$set(e.currItem,"desc",t)},expression:"currItem.desc"}})],1),s("el-form-item",[s("p",[e._v("Price")]),s("el-input",{staticClass:"price-input",attrs:{type:"number",placeholder:"Price",required:""},model:{value:e.currItem.price,callback:function(t){e.$set(e.currItem,"price",t)},expression:"currItem.price"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveItem}},[e._v("Create")]),s("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("Cancel")])],1)],1),s("div",[s("img",{attrs:{src:e.currItem.img}})])],1)])},Mt=[],St=(s("96cf"),s("1da1")),Dt={data:function(){return{currItem:{title:"",category:"",desc:"",price:"",img:"",condition:"",callDibs:[]},isLoadingCat:!1,catagories:[]}},methods:{saveItem:function(){var e=Object(St["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("submiting form"),t=JSON.parse(JSON.stringify(this.currItem)),!this.currItem._id){e.next=6;break}this.$store.dispatch({type:"editItem",item:t}).then(function(e){s.$router.push("/item/details/".concat(e._id))}),e.next=14;break;case 6:return t=JSON.parse(JSON.stringify(this.currItem)),t.createAt=Date.now(),t.sellerId=this.$store.getters.getLoggedUser._id,e.next=11,this.$store.dispatch({type:"getLocation"});case 11:t.location=e.sent,t.callDibs=[],this.$store.dispatch({type:"addItem",item:t}).then(function(e){s.$store.commit({type:"resetNewUrl"}),s.$router.push("/item/details/".concat(e))});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{},created:function(){var e=this,t=this.$route.params.id;if(t)this.$store.dispatch({type:"getItemById",itemId:t}).then(function(t){return e.currItem=t});else{var s={title:"",category:"",Description:"",price:0,img:this.$store.getters.getImageUrl};this.currItem=s}this.isLoadingCat=!0,this.$store.dispatch({type:"getAllCatagories"}).then(function(t){e.catagories=t,e.isLoadingCat=!1})}},Ot=Dt,At=(s("ed0e"),Object(_["a"])(Ot,Lt,Mt,!1,null,"01e7039c",null));At.options.__file="edit-item.vue";var Nt=At.exports,Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-layout"},[e._v("\n  "+e._s(e.filterTxt)+"\n  "),e.isLoadingCat?i("img",{staticClass:"loading",attrs:{src:s("fe2b"),alt:"",srcset:""}}):i("section",[i("div",{staticClass:"catagories-container"},e._l(e.catagories,function(t){return t.length>1?i("div",{key:t,on:{click:function(s){e.catagoryClicked(t)}}},[e._v(e._s(t))]):e._e()})),e.isLoadingItems?i("img",{staticClass:"loading",attrs:{src:s("fe2b"),alt:"",srcset:""}}):i("items-tumbnail",{staticClass:"search-res",attrs:{list:e.itemsToDisplay}})],1)])},Et=[],Rt={name:"search-page",data:function(){return{catagories:[],itemsToDisplay:[],filter:{byTxt:"",byType:""},isLoadingCat:!1,isLoadingItems:!1}},created:function(){var e=this;this.isLoadingCat=!0,this.$store.dispatch({type:"getAllCatagories"}).then(function(t){t=JSON.parse(JSON.stringify(t)),e.catagories=t,e.catagories.unshift("All"),e.isLoadingCat=!1})},methods:{catagoryClicked:function(e){"All"===e&&(e=""),this.filter.byType=e},filterItems:function(){var e=this;this.isLoadingItems=!0;var t=this.filter;this.$store.dispatch({type:"filterItems",filter:t}).then(function(t){e.itemsToDisplay=t,e.isLoadingItems=!1})}},computed:{filterTxt:function(){this.isLoadingItems=!0;var e=this.$store.getters.getFilterTxt;this.filter.byTxt=e}},watch:{filter:{handler:function(){this.filterItems()},immediate:!0,deep:!0}},components:{itemsTumbnail:dt}},Pt=Rt,Bt=(s("a31a"),Object(_["a"])(Pt,Tt,Et,!1,null,"7ecd1a40",null));Bt.options.__file="search-page.vue";var qt=Bt.exports,Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"user-page-container"},[e.isLoadin?s("section",[e._v("Loading...")]):s("section",{staticClass:"user-page-content"},[s("div",{staticClass:"user-profile-preview"},[s("img",{staticClass:"user-profile-thumbnail",attrs:{src:e.user.img}}),s("div",{staticClass:"profile-info flex column"},[s("h1",[e._v(e._s(e.user.nickname)+e._s(e.isLoggedUser?"":"'s Garage"))]),e.isLoggedUser?s("section",[s("div",{staticClass:"edit-user flex row",on:{click:e.editUserClicked}},[s("i",{staticClass:"far fa-edit"}),s("h3",[e._v("Edit Profile")])]),s("a",{staticClass:"logoutBtn",on:{click:e.logoutUser}},[e._v("Logout")])]):s("div",{staticClass:"rating"},[e._l(e.user.rate,function(e){return s("span",{key:e,staticClass:"fa fa-star checked"})}),e._l(5-e.user.rate,function(e){return s("span",{key:e.idx,staticClass:"fa fa-star empty-star"})})],2)])]),e.isLoggedUser?s("div",{staticClass:"tab-container"},[s("sui-tab",{attrs:{"active-index":"0"}},[s("sui-tab-pane",{attrs:{label:e.user.listedItems.length+"",title:"My Garage"}},[s("items-tumbnail",{attrs:{list:e.user.listedItems}})],1),s("sui-tab-pane",{attrs:{label:e.dibs.length+"",title:"Dibs Requset"}},[s("dibs-page",{attrs:{isDibs:!1},on:{removeItem:e.removeItem}})],1),s("sui-tab-pane",{attrs:{label:e.dibsAns.filter(function(e){return e.isAns}).length+"",title:"Dibs Answer"}},[s("dibs-page",{attrs:{isDibs:!0},on:{removeItem:e.removeItem}})],1)],1)],1):[s("items-tumbnail",{attrs:{list:e.user.listedItems}})],e.user.events.length>2?s("event-feed",{attrs:{events:e.user.events}}):e._e()],2)])},Ft=[],zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("sui-tab",{attrs:{"active-index":"2"}},[s("sui-tab-pane",{attrs:{icon:"users",title:"Circle"}},[e._v("Circle")]),s("sui-tab-pane",{attrs:{label:"0",title:"Box"}},[e._v("Box")]),s("sui-tab-pane",{attrs:{icon:"check",label:"14",title:"Triangle"}},[e._v("Triangle")])],1)],1)},Wt=[],Gt={name:"DefaultActiveIndexExample"},Ht=Gt,Yt=Object(_["a"])(Ht,zt,Wt,!1,null,null,null);Yt.options.__file="user-tab.vue";var Kt=Yt.exports,Vt="/api/user",Qt={getById:is,getByName:rs,remove:os,edit:cs,checkUser:es,loadFromLocalStorage:ts,loadDibs:ss,getUserWishlist:as,updateUser:Zt,logout:Xt,getUsers:ns};function Xt(){return Q.a.post("".concat(Vt,"/logout"))}function Zt(e){l.save(a,e)}function es(e){return Q.a.post("".concat(Vt),{user:e}).then(function(e){return l.save(a,e.data.token),e.data.user})}function ts(){var e=l.load(a);return e||null}function ss(e){return Q.a.get("".concat(Vt,"/dibs/").concat(e)).then(function(e){return e.data})}function is(e){return Q.a.get("".concat(Vt,"/").concat(e)).then(function(e){return e.data[0]})}function rs(e){return Q.a.post("".concat(Vt,"/sign/user"),{userName:e}).then(function(e){return e.data})}function ns(){return Q.a.get("".concat(Vt)).then(function(e){return e.data})}function as(e){return Q.a.get("".concat(Vt,"/wishlist/").concat(e)).then(function(e){return e.data[0]})}function os(e){return Q.a.delete("".concat(Vt,"/").concat(e))}function cs(e){return e._id?(l.save(a,e),Q.a.put("".concat(Vt),e).then(function(e){return e.data})):Q.a.post("".concat(Vt,"/sign"),e)}var us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",[e._v("Upcoming events: "+e._s(e.news))])},ls=[],ds={props:["events"],data:function(){return{feed:null,news:null}},created:function(){var e=this,t=0;this.feed=setInterval(function(){e.news=e.events[t],t++,t>=e.events.length&&(t=0)},3e3)},destroyed:function(){clearInterval(this.feed)}},fs=ds,ms=(s("4092"),Object(_["a"])(fs,us,ls,!1,null,"6d265db8",null));ms.options.__file="event-feed.vue";var gs=ms.exports,hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loggedUser?s("section",{staticClass:"dibs-container"},[s("dibs-list",{attrs:{dibs:e.isDibs?e.dibsAns:e.dibs,isDibs:e.isDibs},on:{sendAns:e.sendAns,removeDib:e.removeDib,cancelDibReq:e.cancelDibReq,doneBuy:e.doneBuy}})],1):e._e()},ps=[],vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[e.dibs.length?e._l(e.dibs,function(t,i){return s("dibs-preview",{key:i,attrs:{dib:t,idx:i,isAnsList:e.isDibs},on:{removeDib:function(t){e.$emit("removeDib",t)},sendAns:function(t){e.$emit("sendAns",t)},cancelDibReq:function(t){e.$emit("cancelDibReq",t)},doneBuy:function(t){e.$emit("doneBuy",t)}}})}):s("h1",[e._v("No dibs")])],2)},bs=[],_s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"dibs-li"},[e.isAnsList?[s("div",{staticClass:"dibAns-container"},[s("sui-card",[s("sui-card-content",[s("sui-card-header",[s("section",{staticClass:"flex row between"},[e.dib.isAns?[e.dib.type?[e._v("Accepted!")]:[e._v("Declined")]]:[e._v("Pending")],s("router-link",{attrs:{to:"/item/details/"+e.dib.item._id}},[s("sui-image",{attrs:{src:e.dib.item.img}})],1)],2),s("router-link",{staticClass:"call-seller",attrs:{to:"/chat/user/"+e.dib.item.sellerId}},[s("i",{staticClass:"far fa-comment-alt"}),s("span",[e._v(" ")]),e._v("\n              Call Seller\n            ")])],1)],1),s("sui-card-content",{attrs:{extra:""}},[s("sui-container",{attrs:{"text-align":"center"}},[s("sui-button-group",[e.dib.isAns?s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("doneBuy",e.idx)}}},[e._v("Done!")]):s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("cancelDibReq",{dib:e.dib,idx:e.idx})}}},[e._v("Never mind..")])],1)],1)],1)],1)],1)]:[s("div",{staticClass:"dib-container"},[e.fromUser?s("sui-card",[s("sui-card-content",[s("router-link",{attrs:{to:"/user/"+e.fromUser._id}},[s("sui-image",{staticClass:"right floated",attrs:{src:e.fromUser.img}}),s("sui-card-header",[e._v(e._s(e.fromUser.nickname))])],1),s("sui-card-description",[e._v("\n            Interested about the "+e._s(e.dib.item.title)+" that you offer:\n            "),s("img",{attrs:{src:e.dib.item.img}})])],1),s("sui-card-content",{attrs:{extra:""}},[s("sui-container",{attrs:{"text-align":"center"}},[s("sui-button-group",[s("sui-button",{attrs:{basic:"",positive:""},on:{click:function(t){e.$emit("sendAns",{dib:e.dib,idx:e.idx,type:!0})}}},[s("i",{staticClass:"fas fa-check"})]),s("sui-button",{attrs:{basic:"",negative:""},on:{click:function(t){e.$emit("sendAns",{dib:e.dib,idx:e.idx,type:!1})}}},[s("i",{staticClass:"fas fa-times"})])],1)],1)],1)],1):e._e()],1)]],2)},ys=[],Cs={props:["dib","idx","isAnsList"],data:function(){return{fromUser:null}},methods:{getFromUser:function(){var e=this;this.$store.dispatch({type:"getUserById",userId:this.dib.from}).then(function(t){return e.fromUser=t})}},created:function(){this.isAnsList||this.getFromUser()}},ks=Cs,Us=(s("8e74"),Object(_["a"])(ks,_s,ys,!1,null,"17135dea",null));Us.options.__file="dibs-preview.vue";var ws=Us.exports,$s={props:{dibs:Array,isDibs:Boolean},components:{dibsPreview:ws}},Is=$s,js=(s("f9c5"),Object(_["a"])(Is,vs,bs,!1,null,null,null));js.options.__file="dibs-list.vue";var xs=js.exports,Ls={props:["isDibs"],computed:{dibs:function(){return this.$store.getters.getLoggedUser.dibs},dibsAns:function(){return this.$store.getters.getLoggedUser.dibsAns},loggedUser:function(){return this.$store.getters.getLoggedUser}},methods:{removeDib:function(e){var t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));return t.dibs.splice(e,1),this.$store.dispatch({type:"updateUser",user:t})},sendAns:function(e){var t=this,s=e.dib,i=e.idx,r=e.type,n={dib:s,idx:i,type:r};if(r)this.$store.dispatch({type:"removeItem",item:s.item}).then(function(){t.$emit("removeItem")}),this.removeDib(i).then(function(){t.$store.dispatch({type:"sendAns",ans:n})});else{var a=JSON.parse(JSON.stringify(s.item)),o=a.callDibs.indexOf(s.from);a.callDibs.splice(o,1),this.$store.dispatch({type:"editItem",item:a}),this.removeDib(i).then(function(){t.$store.dispatch({type:"sendAns",ans:n})})}},cancelDibReq:function(e){var t=e.dib,s=e.idx,i=JSON.parse(JSON.stringify(t.item)),r=i.callDibs.indexOf(this.loggedUser._id);i.callDibs.splice(r,1),this.$store.dispatch({type:"editItem",item:i}),t.from=this.$store.getters.getLoggedUser._id;var n=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));n.dibsAns.splice(s,1),this.$store.dispatch({type:"updateUser",user:n}),this.$store.dispatch({type:"cancelDibReq",dib:t})},doneBuy:function(e){var t=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));console.log(t),t.dibsAns.splice(e,1),console.log(t),this.$store.dispatch({type:"updateUser",user:t})}},components:{dibsList:xs}},Ms=Ls,Ss=(s("4bbb"),Object(_["a"])(Ms,hs,ps,!1,null,"694210b0",null));Ss.options.__file="dibs-page.vue";var Ds=Ss.exports,Os={name:"home",components:{garageFooter:C,itemsTumbnail:dt,eventFeed:gs,userService:Qt,userTab:Kt,dibsPage:Ds},data:function(){return{user:null,isLoadin:!0,isLoggedUser:!1}},methods:{logoutUser:function(){var e=this;this.$store.dispatch({type:"disconnentChat",user:this.user}),this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})},editUserClicked:function(){this.$router.push("/user/edit/".concat(this.user._id))},itemClicked:function(e){this.$router.push("/item/details/".concat(e))},removeItem:function(){this.setUser()},setUser:function(){var e=this,t=this.$route.params.userId,s=this.$store.getters.getLoggedUser;if(s){var i=this.$store.getters.getLoggedUser._id;t===i&&(this.isLoggedUser=!0)}this.$store.dispatch({type:"getUserById",userId:t}).then(function(t){e.user=t,e.isLoadin=!1}).catch(function(e){return console.log("EROOOOOR")})}},computed:{dibs:function(){return this.$store.getters.getLoggedUser.dibs},dibsAns:function(){return this.$store.getters.getLoggedUser.dibsAns}},watch:{"$route.params.userId":{handler:function(){this.isLoggedUser=!1,this.setUser()},immediate:!0}},created:function(){this.setUser()}},As=Os,Ns=Object(_["a"])(As,Jt,Ft,!1,null,null,null);Ns.options.__file="user-page.vue";var Ts=Ns.exports,Es=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-item-container flex column"},[e.isLoading?i("img",{staticClass:"loading",attrs:{src:s("fe2b"),alt:"",srcset:""}}):e._e(),i("label",{attrs:{id:"#bb"}},[e._v("\n    Upload a File\n    "),i("input",{attrs:{type:"file",id:"File",size:"60",accept:"image/*"},on:{change:e.onSelectedFile}})]),e.isPc?i("div",{staticClass:"video-container"},[e.showStream?e._e():i("br"),e.showStream?e._e():i("span",[e._v("Or")]),i("br"),e.showStream?e._e():i("div",{staticClass:"icon add-photo",on:{click:e.startStream}},[i("i",{staticClass:"fas fa-play-circle"}),e._v("\n      Take a photo\n    ")]),e.showStream?i("div",[i("video",{ref:"video",attrs:{id:"video",width:"300",height:"300",autoplay:"",muted:"muted"},domProps:{muted:!0}}),i("div",{staticClass:"icon take-photo",on:{click:e.capture}},[i("i",{staticClass:"fas fa-camera"})])]):e._e(),i("canvas",{ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}})]):e._e()])},Rs=[],Ps=(s("ac6a"),{name:"select-image",data:function(){return{video:{},canvas:{},imageData:"",showStream:!1,isPc:!1,isLoading:!1}},mounted:function(){this.$store.getters.getLoggedUser;screen.width>500&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this.isPc=!0)},methods:{startStream:function(){var e=this;this.showStream=!0,navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.$refs.video.srcObject=t})},capture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.$refs.video,0,0,640,480);this.imageData=this.canvas.toDataURL("image/png"),this.showStream=!1,this.stopStream(),this.saveImage()},onSelectedFile:function(e){var t=this,s=new FileReader;s.onload=function(e){t.imageData=e.target.result,t.saveImage()},s.readAsDataURL(e.target.files[0])},stopStream:function(){this.$refs.video.srcObject.getVideoTracks().forEach(function(e){return e.stop()})},saveImage:function(){var e=this;this.isLoading=!0;var t=this.$store.getters.getLoggedUser;this.$store.dispatch({type:"saveImage",imageToSave:this.imageData}).then(function(s){"edit-user"===e.$route.params.def&&t?e.$router.push("/user/edit/userId"):"item"===e.$route.params.def&&t?e.$router.push("/item/edit"):e.$router.push("/signup"),e.isLoading=!1}).catch(function(e){console.log("ERROR:",e)})}},beforeDestroy:function(){this.stopStream()},beforeRouteUpdate:function(){var e=this.$store.getters.getLoggedUser;e||next("/login")}}),Bs=Ps,qs=(s("cfc0"),Object(_["a"])(Bs,Es,Rs,!1,null,"b2d3a5dc",null));qs.options.__file="select-image.vue";var Js=qs.exports,Fs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editContainer"},[e.user?s("form",{on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[s("label",{staticClass:"user-img-wrapper",attrs:{for:"image"},on:{click:e.editImage}},[s("img",{attrs:{src:e.newImage?e.newImage:e.editedUser.img,alt:"no image to display"}})]),s("label",[s("div",[e._v("Nickname:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.nickname,expression:"editedUser.nickname"}],attrs:{type:"text"},domProps:{value:e.editedUser.nickname},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"nickname",t.target.value)}}})]),s("label",[s("div",[e._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.password,expression:"editedUser.password"}],attrs:{type:"password"},domProps:{value:e.editedUser.password},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"password",t.target.value)}}})]),s("button",{attrs:{type:"submit"}},[e._v("Save")])]):e._e()])},zs=[],Ws={name:"edit-user",data:function(){return{editedUser:{}}},computed:{user:function(){if(this.$store.getters.editUser)var e=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));else if(this.$store.getters.getLoggedUser){e=JSON.parse(JSON.stringify(this.$store.getters.getLoggedUser));return this.editedUser=e,!0}return!1},newImage:function(){return this.$store.getters.getImageUrl}},methods:{editImage:function(){console.log("clicked");var e=this.editedUser;this.$store.commit({type:"setEditUser",editUser:e}),this.$router.push("/select-image/edit-user")},saveUser:function(){var e=this;this.newImage.length&&(this.editedUser.img=this.newImage);var t=this.editedUser;this.$store.dispatch({type:"updateUser",user:t}).then(function(t){e.$store.commit({type:"resetEditedUser"}),e.$store.commit({type:"resetNewUrl"}),e.$router.push("/user/".concat(t._id))})}}},Gs=Ws,Hs=(s("902a"),Object(_["a"])(Gs,Fs,zs,!1,null,"0bcad0ce",null));Hs.options.__file="edit-user.vue";var Ys=Hs.exports,Ks=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("el-form",{ref:"user",staticClass:"demo-ruleForm form-container",attrs:{model:e.user,"status-icon":"",rules:e.rules2,"label-width":"120px"},on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[s("img",{attrs:{src:e.img?e.img:"https://res.cloudinary.com/duxpc5ggn/image/upload/v1543435981/u1.jpg",alt:"",srcset:""}}),s("router-link",{staticClass:"camera-icon flex column center",attrs:{to:"/select-image"}},[s("i",{staticClass:"fas fa-camera"}),s("div",[e._v(e._s(e.img?"Edit":"Add")+" Photo")])]),s("el-form-item",{attrs:{label:"Nickname",prop:"nickname"}},[s("el-input",{on:{input:e.checkNickname},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}}),e.errorNickname.isErr?s("span",{attrs:{id:"error-input"}},[e._v(e._s(e.errorNickname.txt))]):e.user.nickname?s("span",{attrs:{id:"good-input"}},[e._v("Your nickname is good!")]):e._e()],1),s("el-form-item",{attrs:{label:"Password",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("el-form-item",{attrs:{label:"Confirm",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass",t)},expression:"user.checkPass"}})],1),s("el-form-item",{staticClass:"form-btns"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("Submit")]),s("el-button",{on:{click:function(t){e.resetForm("user")}}},[e._v("Reset")])],1)],1)],1)},Vs=[],Qs={data:function(){var e=this,t=function(t,s,i){""===s?i(new Error("Please input the password")):(""!==e.user.checkPass&&e.$refs.user.validateField("checkPass"),i())},s=function(t,s,i){""===s?i(new Error("Please input the password again")):s!==e.user.password?i(new Error("Two inputs don't match!")):i()};return{user:{nickname:"",password:"",checkPass:"",location:"",rate:0,dibs:[],dibsAns:[],itemList:[],wishList:[],historyChat:[],events:[],img:""},rules2:{password:[{validator:t,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}],nickname:[{required:!0,message:"Please input a name",trigger:"blur"},{min:2,max:8,message:"Length should be 3 to 8",trigger:"blur"}]},errorNickname:{isErr:!1,txt:"This nickname is taken"},errorPass:{isErr:!1,txt:"There is problem with your password"}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},saveUser:function(){var e=this;this.$store.dispatch({type:"addUser",user:this.user}).then(function(){e.$router.push("/login")})},checkNickname:function(){var e=this;this.$store.dispatch({type:"getUserByName",userName:this.user.nickname.trim()}).then(function(t){e.errorNickname.isErr=!!t})}},computed:{img:function(){return this.$store.getters.getImageUrl},isValid:function(){return!(this.errorPass.isErr||this.errorNickname.isErr)&&""!==this.user.nickname&&""!==this.repeatPass}},created:function(){},components:{}},Xs=Qs,Zs=(s("b8b5"),Object(_["a"])(Xs,Ks,Vs,!1,null,"49e71a68",null));Zs.options.__file="signup-page.vue";var ei=Zs.exports,ti=s("2f62");i["default"].use(ti["a"]);var si={strict:!0,state:{loggedUser:null,bestSellers:null,editUser:null},mutations:{setEditUser:function(e,t){var s=t.editUser;e.editUser=s},resetEditedUser:function(e){e.editUser=null},setLoggedUser:function(e,t){var s=t.user;e.loggedUser=s},setBestSellers:function(e,t){var s=t.users;e.bestSellers=s},toggleWishlist:function(e,t){var s=e.loggedUser.wishList.indexOf(t);return-1===s?e.loggedUser.wishList.push(t):e.loggedUser.wishList.splice(s,1),Qt.edit(e.loggedUser).then(function(e){})},updateUserLocally:function(e,t){var s=t.user;e.loggedUser=s,Qt.updateUser(s)},logoutUser:function(e){e.loggedUser=null}},actions:{toggleWishlist:function(e,t){var s=t.id;return e.commit("toggleWishlist",s),Qt.edit(e.state.loggedUser).then(function(e){})},loadChange:function(e){Qt.getById(e.state.loggedUser._id).then(function(t){l.save(a,t),e.commit({type:"setLoggedUser",user:t})})},checkUser:function(e,t){var s=t.user;return Qt.checkUser(s).then(function(t){return e.dispatch({type:"getLocation"}).then(function(e){return t.location=e,t}).catch(function(){var e={lng:34.803139,lat:32.088032};return t.location=e,t})}).then(function(t){e.commit({type:"setLoggedUser",user:t})})},getUserById:function(e,t){e.commit;var s=t.userId;return Qt.getById(s).then(function(e){return e})},getUserWishlist:function(e,t){e.commit;var s=t.userId;return Qt.getUserWishlist(s).then(function(e){return e})},addUser:function(e,t){e.commit;var s=t.user;return Qt.edit(s).then(function(e){return e})},getBestSellers:function(e){var t=e.commit;return Qt.getUsers().then(function(e){return t({type:"setBestSellers",users:e}),e})},getUserByName:function(e,t){e.commit;var s=t.userName;return Qt.getByName(s).then(function(e){return e})},updateUser:function(e,t){var s=e.commit,i=t.user;return Qt.edit(i).then(function(e){return s({type:"updateUserLocally",user:e}),e})},logout:function(e){var t=e.commit;return Qt.logout().then(function(){l.clear(a),t({type:"logoutUser"})})}},getters:{getLoggedUser:function(e){return e.loggedUser},bestSellers:function(e){if(e.bestSellers)return e.bestSellers.filter(function(e){return"header"in e})},getEditUser:function(e){return e.editUser}}};s("20d6");i["default"].use(ti["a"]);var ii={strict:!0,state:{items:[],newUrl:""},mutations:{resetNewUrl:function(e){e.newUrl=""},setItems:function(e,t){var s=t.items;e.items=s},editItem:function(e,t){var s=t.updatedItem,i=e.items,r=i.findIndex(function(e){return e._id===s._id});if(-1!==r)return i.splice(r,1,s);i.unshift(s)},setNewUrl:function(e,t){var s=t.url;e.newUrl=s}},actions:{removeItem:function(e,t){var s=t.item;Z.remove(s._id,s.sellerId).then(function(t){e.commit({type:"updateUserLocally",user:t})})},loadItems:function(e){var t=e.commit;Z.query().then(function(e){return t({type:"setItems",items:e}),e})},getItemById:function(e,t){e.commit;var s=t.itemId;return Z.getById(s).then(function(e){return e})},editItem:function(e,t){var s=e.commit,i=t.item;return Z.edit(i).then(function(e){return s({type:"editItem",updatedItem:e}),e})},saveImage:function(e,t){var s=e.commit;return Z.saveImage(t).then(function(e){s({type:"setNewUrl",url:e})})},addItem:function(e,t){var s=t.item;return Z.addItem(s).then(function(t){return e.dispatch({type:"getUserById",userId:t.sellerId}).then(function(t){e.commit({type:"updateUserLocally",user:t})}),t._id})}},getters:{itemsToDisplay:function(e){return e.items},getItems:function(e){return e.items},getImageUrl:function(e){return e.newUrl}}},ri=s("8468"),ni="/api/msg";function ai(e,t){return Q.a.get("".concat(ni,"?userId=").concat(e,"&userDest=").concat(t)).then(function(e){return e.data})}function oi(e){return Q.a.get("".concat(ni,"?userId=").concat(e)).then(function(e){return e.data})}function ci(e){return Q.a.post("".concat(ni,"/chat/disconnect"),{user:e}).then(function(e){return e.data[0]})}function ui(e){return Q.a.post("".concat(ni,"/chat/connect"),{user:e}).then(function(e){return e.data[0]})}var li,di,fi={queryMsgs:ai,queryRooms:oi,disconnentChat:ci,connentChat:ui},mi=s("8055"),gi=s.n(mi),hi="";function pi(e){return li=gi()(hi),li.emit("inline",e),li.on("newMsg",function(e){console.log("new msg"),g.$emit(d,e)}),li.on("got-dibs",function(t,s){e===s.sellerId&&e!==t&&g.$emit(f)}),li.on("got-ans",function(t){e===t.dib.from&&g.$emit(f)}),li.on("got-cancle-dib",function(t){e===t.item.sellerId&&g.$emit(f)}),li.on("usersConnected",function(e){di=e}),Promise.resolve(di)}function vi(e,t){li.emit("dibs",e,t)}function bi(e,t){li.emit("chat-newMsg",e,di,t)}function _i(e){li.emit("sendAns",e)}function yi(e){li.emit("cancelDibReq",e)}function Ci(e){li.emit("disconnect-room",e,di)}function ki(e,t){li.emit("roomRequested",e,t)}var Ui={connectSocket:pi,sendMsg:bi,sendDibs:vi,sendAns:_i,cancelDibReq:yi,disconnectRoom:Ci,roomRequested:ki};i["default"].use(ti["a"]);var wi={strict:!0,state:{msgs:[],rooms:[]},mutations:{setMsgs:function(e,t){var s=t.msgs;e.msgs=s},setRooms:function(e,t){var s=t.rooms;e.rooms=s},addMsg:function(e,t){var s=t.msg;e.msgs.push(s)},connectSocket:function(e,t){var s=t.userId,i=t.userDest;Ui.connectSocket(s,i)},roomRequested:function(e,t){var s=t.userId,i=t.userDest;Ui.roomRequested(s,i)}},actions:{loadMsgs:function(e,t){var s=e.commit,i=t.userId,r=t.userDest;return fi.queryMsgs(i,r).then(function(e){s({type:"setMsgs",msgs:e})})},loadRooms:function(e,t){var s=e.commit,i=t.userId;return fi.queryRooms(i).then(function(e){return s({type:"setRooms",rooms:e}),e})},sendMsg:function(e,t){e.commit;var s=t.msg,i=t.userId;Ui.sendMsg(s,i)},sendDibs:function(e,t){e.commit;var s=t.userId,i=t.item;Ui.sendDibs(s,i)},sendAns:function(e,t){e.commit;var s=t.ans;Ui.sendAns(s)},cancelDibReq:function(e,t){Object(ri["a"])(e);var s=t.dib;Ui.cancelDibReq(s)},disconnentChat:function(e,t){var s=t.user;return fi.disconnentChat(s)},connentChat:function(e,t){var s=t.user;return fi.connentChat(s).then(function(t){e.commit({type:"setLoggedUser",user:t})})},disconnectRoom:function(e,t){var s=t.userId;Ui.disconnectRoom(s)}},getters:{getMsgs:function(e){return e.msgs},getRooms:function(e){return e.rooms}}},$i="/api/item",Ii={getCatagories:ji,query:xi};function ji(){return Q.a.post("".concat($i,"/search")).then(function(e){return e.data})}function xi(e){var t=e.filter;if(!t.byTxt&&!t.byType)return Q.a.get("".concat($i)).then(function(e){return e.data});var s="?";return s+=t.byTxt?"&text=".concat(t.byTxt):"",s+=t.byType?"&type=".concat(t.byType):"",Q.a.get("".concat($i,"/filter/").concat(s)).then(function(e){return e.data})}i["default"].use(ti["a"]);var Li={strict:!0,state:{catagories:[],itemsToDisplay:[],txt:""},mutations:{setCatagories:function(e,t){var s=t.catagories;e.catagories=s},setItemsToDisplay:function(e,t){var s=t.itemsToDisplay;e.itemsToDisplay=s},setFilterTxt:function(e,t){var s=t.txt;e.txt=s}},actions:{getAllCatagories:function(e){var t=e.commit;return Ii.getCatagories().then(function(e){return t({type:"setCatagories",catagories:e}),e})},filterItems:function(e,t){var s=e.commit;return Ii.query(t).then(function(e){return s({type:"setItemsToDisplay",itemsToDisplay:e}),e})}},getters:{getAllCatagories:function(e){return e.catagories},getItemsToDisplay:function(e){return e.itemsToDisplay},getFilterTxt:function(e){return e.txt}}},Mi={calcDistance:Si};function Si(e,t){var s=6371,i=Di(t.lat-e.lat),r=Di(t.lng-e.lng),n=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Di(e.lat))*Math.cos(Di(e.lng))*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),o=s*a;return o.toFixed(2)}function Di(e){return e*(Math.PI/180)}i["default"].use(ti["a"]);var Oi=new ti["a"].Store({strict:"true",modules:{itemModule:ii,userModule:si,msgModule:wi,searchModule:Li},state:{isMenu:!1},mutations:{toggleMenu:function(e){e.isMenu=!e.isMenu}},actions:{getLocation:function(){return new Promise(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var s={lng:t.coords.longitude,lat:t.coords.latitude};e(s)},t):t("no geolocation in navigator")})}},getters:{isMenu:function(e){return e.isMenu},user:function(e){return e.loggedUser},someMethod:function(e){return function(t){return e.things.find(function(e){return e.id===t})}},getDistance:function(e){return function(t){var s=e.userModule.loggedUser.location;return Mi.calcDistance(s,t)}}}});i["default"].use(R["a"]);var Ai=new R["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:je},{path:"/login",name:"login",component:Qe},{path:"/signup",name:"signup",component:ei},{path:"/dibs/:dibRoute?",name:"dibsPage",component:Ds},{path:"/select-image/:def?",name:"select-image",component:Js,beforeEnter:function(e,t,s){var i=Oi.getters.getLoggedUser;if("signup"!==t.name&&!i)return s("/login");s()}},{path:"/search",name:"search",component:qt},{path:"/chat",name:"chat",component:We},{path:"/chat/user/:sellerId",name:"user-chat",component:it},{path:"/user/:userId",name:"user-page",component:Ts},{path:"/item/edit/:id?",name:"edit",component:Nt},{path:"/user/wishlist/:userId",name:"wishlist",component:ht},{path:"/user/edit/:userId",name:"edit-user",component:Ys},{path:"/item/details/:id",name:"item-details",component:xt}]}),Ni=s("2ead"),Ti=s.n(Ni),Ei=s("7f45"),Ri=s.n(Ei),Pi=s("619c"),Bi=s("755e"),qi=s("92d5"),Ji=s.n(qi),Fi=(s("c4ca"),s("9483"));Object(Fi["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});s("c1c3");var zi=s("cca1"),Wi=s.n(zi);i["default"].use(Wi.a),i["default"].use(Pi["a"]),i["default"].use(Ji.a),i["default"].use(Ti.a,{moment:Ri.a}),i["default"].use(Bi,{load:{key:"AIzaSyA4fRJvLkBs3sem_ym7juIhLPuavgF9I08",libraries:"places"}}),i["default"].config.productionTip=!1,i["default"].filter("relativeTime",function(e){return Ri()(e).format("L")}),new i["default"]({router:Ai,store:Oi,VueCarousel:me.a,render:function(e){return e(E)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var i=s("5e27"),r=s.n(i);r.a},"5e27":function(e,t,s){},6652:function(e,t,s){},"7cb3":function(e,t,s){"use strict";var i=s("3392"),r=s.n(i);r.a},"7f51":function(e,t,s){},"86a4":function(e,t,s){},"8cc9":function(e,t,s){},"8e74":function(e,t,s){"use strict";var i=s("0ea3"),r=s.n(i);r.a},"902a":function(e,t,s){"use strict";var i=s("d253"),r=s.n(i);r.a},"95b6":function(e,t,s){},"9ce3":function(e,t,s){"use strict";var i=s("e98f"),r=s.n(i);r.a},"9e0b":function(e,t,s){"use strict";var i=s("7f51"),r=s.n(i);r.a},a207:function(e,t,s){"use strict";var i=s("3af7"),r=s.n(i);r.a},a31a:function(e,t,s){"use strict";var i=s("d0a6"),r=s.n(i);r.a},a461:function(e,t,s){},a4d8:function(e,t,s){"use strict";var i=s("86a4"),r=s.n(i);r.a},b8b5:function(e,t,s){"use strict";var i=s("a461"),r=s.n(i);r.a},bcc9:function(e,t,s){},c1c3:function(e,t,s){},cd8c:function(e,t,s){},cfc0:function(e,t,s){"use strict";var i=s("cd8c"),r=s.n(i);r.a},d0a6:function(e,t,s){},d253:function(e,t,s){},d52d:function(e,t,s){},d822:function(e,t,s){"use strict";var i=s("da33"),r=s.n(i);r.a},da1c:function(e,t,s){},da33:function(e,t,s){},e918:function(e,t,s){},e98f:function(e,t,s){},ec52:function(e,t,s){"use strict";var i=s("d52d"),r=s.n(i);r.a},ec60:function(e,t,s){},ed0e:function(e,t,s){"use strict";var i=s("da1c"),r=s.n(i);r.a},f9c5:function(e,t,s){"use strict";var i=s("0928"),r=s.n(i);r.a},fa88:function(e,t,s){"use strict";var i=s("8cc9"),r=s.n(i);r.a},fe2b:function(e,t,s){e.exports=s.p+"img/loader.a21746f5.gif"},fe4d:function(e,t,s){}});
//# sourceMappingURL=app.d8a74a88.js.map